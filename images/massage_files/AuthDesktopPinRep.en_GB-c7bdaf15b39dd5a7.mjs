"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2984,3875,82837,79725,5685,27405,58103,84590],{782677:(e,t,i)=>{function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function o(e){return!!(e&&"function"==typeof e.hasOwnProperty&&(e.hasOwnProperty("__ownerID")||e._map&&e._map.hasOwnProperty("__ownerID")))}function l(e,t,i){return Object.keys(e).reduce(function(t,r){var a=""+r;return t.has(a)?t.set(a,i(t.get(a),e[a])):t},t)}i.d(t,{Fv:()=>b,fK:()=>v});var d=function(){function e(e,t,i){if(void 0===t&&(t={}),void 0===i&&(i={}),!e||"string"!=typeof e)throw Error("Expected a string key for Entity, but found "+e+".");var r=i,a=r.idAttribute,n=void 0===a?"id":a,l=r.mergeStrategy,d=void 0===l?function(e,t){return s({},e,t)}:l,u=r.processStrategy,c=void 0===u?function(e){return s({},e)}:u,h=r.fallbackStrategy;this._key=e,this._getId="function"==typeof n?n:function(e){return o(e)?e.get(n):e[n]},this._idAttribute=n,this._mergeStrategy=d,this._processStrategy=c,this._fallbackStrategy=void 0===h?function(e,t){}:h,this.define(t)}var t=e.prototype;return t.define=function(e){this.schema=Object.keys(e).reduce(function(t,i){var r,a=e[i];return s({},t,((r={})[i]=a,r))},this.schema||{})},t.getId=function(e,t,i){return this._getId(e,t,i)},t.merge=function(e,t){return this._mergeStrategy(e,t)},t.fallback=function(e,t){return this._fallbackStrategy(e,t)},t.normalize=function(e,t,i,r,a,s){var n=this,o=this.getId(e,t,i),l=this.key;if(l in s||(s[l]={}),o in s[l]||(s[l][o]=[]),s[l][o].some(function(t){return t===e}))return o;s[l][o].push(e);var d=this._processStrategy(e,t,i);return Object.keys(this.schema).forEach(function(t){if(d.hasOwnProperty(t)&&"object"==typeof d[t]){var i=n.schema[t],o="function"==typeof i?i(e):i;d[t]=r(d[t],d,t,o,a,s)}}),a(this,d,e,t,i),o},t.denormalize=function(e,t){var i=this;return o(e)?l(this.schema,e,t):(Object.keys(this.schema).forEach(function(r){if(e.hasOwnProperty(r)){var a=i.schema[r];e[r]=t(e[r],a)}}),e)},a(e,[{key:"key",get:function(){return this._key}},{key:"idAttribute",get:function(){return this._idAttribute}}]),e}(),u=function(){function e(e,t){t&&(this._schemaAttribute="string"==typeof t?function(e){return e[t]}:t),this.define(e)}var t=e.prototype;return t.define=function(e){this.schema=e},t.getSchemaAttribute=function(e,t,i){return!this.isSingleSchema&&this._schemaAttribute(e,t,i)},t.inferSchema=function(e,t,i){if(this.isSingleSchema)return this.schema;var r=this.getSchemaAttribute(e,t,i);return this.schema[r]},t.normalizeValue=function(e,t,i,r,a,s){var n=this.inferSchema(e,t,i);if(!n)return e;var o=r(e,t,i,n,a,s);return this.isSingleSchema||null==o?o:{id:o,schema:this.getSchemaAttribute(e,t,i)}},t.denormalizeValue=function(e,t){var i=o(e)?e.get("schema"):e.schema;return this.isSingleSchema||i?t((this.isSingleSchema?void 0:o(e)?e.get("id"):e.id)||e,this.isSingleSchema?this.schema:this.schema[i]):e},a(e,[{key:"isSingleSchema",get:function(){return!this._schemaAttribute}}]),e}(),c=function(e){function t(t,i){if(!i)throw Error('Expected option "schemaAttribute" not found on UnionSchema.');return e.call(this,t,i)||this}n(t,e);var i=t.prototype;return i.normalize=function(e,t,i,r,a,s){return this.normalizeValue(e,t,i,r,a,s)},i.denormalize=function(e,t){return this.denormalizeValue(e,t)},t}(u),h=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.normalize=function(e,t,i,r,a,n){var o=this;return Object.keys(e).reduce(function(t,i,l){var d,u=e[i];return null!=u?s({},t,((d={})[i]=o.normalizeValue(u,e,i,r,a,n),d)):t},{})},i.denormalize=function(e,t){var i=this;return Object.keys(e).reduce(function(r,a){var n,o=e[a];return s({},r,((n={})[a]=i.denormalizeValue(o,t),n))},{})},t}(u),p=function(e){if(Array.isArray(e)&&e.length>1)throw Error("Expected schema definition to be a single schema, but found "+e.length+".");return e[0]},m=function(e){return Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t]})},y=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.normalize=function(e,t,i,r,a,s){var n=this;return m(e).map(function(e,o){return n.normalizeValue(e,t,i,r,a,s)}).filter(function(e){return null!=e})},i.denormalize=function(e,t){var i=this;return e&&e.map?e.map(function(e){return i.denormalizeValue(e,t)}):e},t}(u),f=function(e,t,i,r,a,n,o){var l=s({},t);return Object.keys(e).forEach(function(i){var r=e[i],s="function"==typeof r?r(t):r,d=a(t[i],t,i,s,n,o);null==d?delete l[i]:l[i]=d}),l},g=function(e,t,i){if(o(t))return l(e,t,i);var r=s({},t);return Object.keys(e).forEach(function(t){null!=r[t]&&(r[t]=i(r[t],e[t]))}),r},v={Array:y,Entity:d,Object:function(){function e(e){this.define(e)}var t=e.prototype;return t.define=function(e){this.schema=Object.keys(e).reduce(function(t,i){var r,a=e[i];return s({},t,((r={})[i]=a,r))},this.schema||{})},t.normalize=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return f.apply(void 0,[this.schema].concat(t))},t.denormalize=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return g.apply(void 0,[this.schema].concat(t))},e}(),Union:c,Values:h},b=function(e,t){if(!e||"object"!=typeof e)throw Error('Unexpected input given to normalize. Expected type to be "object", found "'+(null===e?"null":typeof e)+'".');var i={};return{entities:i,result:function e(t,i,r,a,s,n){return"object"==typeof t&&t?"object"!=typeof a||a.normalize&&"function"==typeof a.normalize?a.normalize(t,i,r,e,s,n):(Array.isArray(a)?function(e,t,i,r,a,s,n){return e=p(e),m(t).map(function(t,o){return a(t,i,r,e,s,n)})}:f)(a,t,i,r,e,s,n):t}(e,e,null,t,function(e,t,r,a,s){var n=e.key,o=e.getId(r,a,s);n in i||(i[n]={});var l=i[n][o];l?i[n][o]=e.merge(l,t):i[n][o]=t},{})}}},558068:(e,t,i)=>{i.d(t,{Hv:()=>l,aX:()=>c,nK:()=>h});var r=i(667294),a=i(616550),s=i(425288),n=i(785893);let{Provider:o,useHook:l}=(0,s.Z)("HistoryStackContext",{previous:[],current:null,forward:[]}),d=e=>e&&e.pathname?e.pathname+(e.search||""):"";function u(e,t){let i={action:t.type,location:t.location,match:t.match};if(t.location===e.current?.location)return e;switch(t.type){case"POP":if(e.forward.length>0&&d(e.forward[0].location)===d(i.location))return{...e,forward:e.forward.slice(1),current:{...e.forward[0],action:t.type},previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};return{...e,forward:e.current?[{action:e.current.action,location:e.current.location,match:e.current.match},...e.forward]:e.forward,current:{...e.previous.slice(-1)[0],action:t.type},previous:e.previous.slice(0,-1)};case"PUSH":return{...e,forward:e.forward.length>0?[]:e.forward,current:i,previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};case"REPLACE":return{...e,current:i};default:return e}}function c(){let{current:e,previous:t}=l(),i=(0,r.useMemo)(()=>e?t.concat(e):t,[e,t]);return i}function h({children:e}){let t=(0,a.k6)(),i=(0,a.TH)(),s=(0,a.$B)(),l={forward:[],current:{action:t.action,location:i,match:s},previous:[]},[d,c]=(0,r.useReducer)(u,l);return(0,r.useEffect)(()=>{let{action:e}=t;c({type:e,location:i,match:s})},[i]),(0,n.jsx)(o,{value:d,children:e})}},391254:(e,t,i)=>{i.d(t,{Z:()=>s}),i(441143);var r=i(785893);class a{static factory(e){return e instanceof a?e:new a(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}function s(e){let{css:t,unsafeCSS:i,...s}=e,n=String(t||"")||i||"",o=!!n;return o?(0,r.jsx)("style",{...s,dangerouslySetInnerHTML:{__html:String(a.factory(n))}}):null}},366284:(e,t,i)=>{i.d(t,{G6:()=>s,i7:()=>n,oi:()=>r,u$:()=>a,un:()=>l,vU:()=>o});let r=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),a=e=>e?e.includes("Chrome")?r.CHROME:e.includes("Safari")?r.SAFARI:e.includes("Firefox")?r.FIREFOX:e.includes("Opera")?r.OPERA:e.includes("IE")?r.IE:e.includes("Edge")?r.EDGE:r.OTHER:r.OTHER;function s(e){return a(e)===r.SAFARI}function n(e){return a(e)===r.CHROME}function o(e){return a(e)===r.FIREFOX}function l(e){return a(e)===r.EDGE}},768559:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(826067);let a=/\/today\/(article|best|trending)\/[\w-]+\/(\d+)/,s=(e,t)=>t?e.substring(t.length).split("/")[0]:e,n=({boardUrl:e,path:t,pinId:i,pinnerUserName:n,search:o,storyPinDataId:l})=>{if(!t)return"";let d="";switch(t){case"/":case"/homefeed/":return"UserHomefeedResource";case n&&`/${n}/pins/`:return"UserPinsResource";case n&&`/${n}/`:case/\/_activity\//.test(t)&&t:return"UserActivityPinsResource";case/\/_created\//.test(t)&&t:return l?"UserStoryPinsFeedResource":"UserActivityPinsResource";case/\/_community\//.test(t)&&t:return"UserDiscoveredPinsResource";case/\/_saved\//.test(t)&&t:return"BoardlessPinsResource";case n&&`/${n}/_shopping_list/`:return"ShoppingListFeedResource";case/\/visual-search\//.test(t)&&t:return"VisualLiveSearchResource";case/\/pin\//.test(t)&&t:d="/pin/";let u=s(t,d);if(i!==u)return`RelatedPinFeedResource_${u}`;break;case/\/search\//.test(t)&&t:if(o){let e=(0,r.mB)(o,{shouldDecode:!1}).q||"";return`SearchResource_${e.toLowerCase()}`}break;case/\/categories\//.test(t)&&t:d="/categories/";let c=s(t,d);return`CategoryFeedResource_${c}`;case/\/discover\/topics\//.test(t)&&t:return"CategoryFeedResource";case/\/news_hub\//.test(t)&&t:d="/news_hub/";let h=s(t,d);return`NewsHubDetailsResource_${h}`;case/\/_tools\/more-ideas\//.test(t)&&t:return"BoardContentRecommendationResource";case/\/topics\//.test(t)&&t:d="/topics/";let p=s(t,d);return`TopicFeedResource_${p}`;case/\/source\//.test(t)&&t:d="/source/";let m=s(t,d);return`DomainFeedResource_${m}`;case/\/explore\//.test(t)&&t:d="/explore/";let y=s(t,d);return`SearchResource_${y}`;case e:case!!e&&/\/more_ideas\//.test(t)&&t:return"BoardFeedResource";case e&&t.indexOf(e)>-1&&t:return"BoardSectionPinsResource";case/\/brand_catalog\//.test(t)&&t:return"BrandCatalogFeedResource";case a.test(t)&&t:let f=t.match(a)?.[2]||"unknown";return`TodayArticleFeedResource_${f}`;case/\/today\//.test(t):return"TodayTabResource";case/\story_feed\//.test(t)&&t:if(o){let{feed_type:e,request_params:t}=(0,r.mB)(o);return`StoryFeedResource_${e}_${t}`}}return""},o=e=>{let t=e?.pathname;return t?(t.match(/\/search\//)&&e?.search&&(t+=e.search),t.toLowerCase()):""},l=({boardUrl:e,location:t,pinId:i,pinnerUserName:r,previousHistory:a,storyPinDataId:s,trackingParams:l,trackingParamsMap:d={}})=>{let u,c;if(!i||!l||!t)return;if(!d)return`${l??""}~0`;let{pathname:h,search:p}=t,m=n({boardUrl:e,path:h,pinId:i,pinnerUserName:r,search:p,storyPinDataId:s,trackingParams:l,trackingParamsMap:d}),y=Object.keys(d),f=(h||"").startsWith("/pin/");if(f){let e=y.find(e=>"PinResource"!==e);u=e?d[e]:d.PinResource}else u=d[m];if(!u&&a&&a.length){let t=o(a[a.length-1].location);c=n({boardUrl:e,path:t,pinId:i,pinnerUserName:r,search:p,storyPinDataId:s,trackingParams:l,trackingParamsMap:d}),u=d[c]}return u||(u=`${l||""}~0`),u}},41861:(e,t,i)=>{i.d(t,{Z:()=>r});function r(e){return function e(t,i){let r;if(null==t||"object"!=typeof t&&"function"!=typeof t)return t;let a=i.find(e=>e.value===t);if(a)return a.result;let s=Object.prototype.toString.call(t);switch(s){case"[object Array]":r=Array(t.length);break;case"[object Set]":r=new Set;break;case"[object Object]":case"[object Arguments]":r={};break;case"[object Map]":r=new Map;break;default:return t}let n=[...i,{value:t,result:r}];switch(s){case"[object Array]":t.forEach((t,i)=>{r[i]=e(t,n)});break;case"[object Set]":t.forEach(t=>{r.add(e(t,n))});break;case"[object Object]":case"[object Arguments]":Object.entries(t).forEach(([t,i])=>{r[t]=e(i,n)});break;case"[object Map]":t.forEach((t,i)=>{r.set(i,e(t,n))})}return r}(e,[])}},407043:(e,t,i)=>{i.d(t,{B:()=>l,v:()=>o});var r=i(385740),a=i(425288),s=i(785893);let{Provider:n,useHook:o}=(0,a.Z)("ContextLogger");function l({children:e,value:t}){let{setViewContextData:i}=(0,r.sV)();return t.injectSetViewContextDataFromHook=i,(0,s.jsx)(n,{value:t,children:e})}},112690:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(407043);let a=()=>(0,r.v)().logContextEvent},643010:(e,t,i)=>{i.d(t,{F6:()=>c,Hs:()=>u,Yc:()=>l,vs:()=>d});var r=i(667294),a=i(844974),s=i(867820);let n="theme",o="dark"===(0,a.qn)(n),l=()=>o;function d(){let[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{t(l())},[t]),e}let u=()=>{(0,a.Nh)(n,"dark"),(0,s.My)("mweb.dark_mode.enable"),window.location.reload()},c=()=>{(0,a.L_)(n),(0,s.My)("mweb.dark_mode.disable"),window.location.reload()}},451820:(e,t,i)=>{i.d(t,{Z:()=>s,k:()=>r});let r={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year"},a=function(e){switch(e){case r.YEAR:return{year:"numeric"};case r.LONG:return{year:"numeric",month:"long",day:"numeric"};case r.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case r.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case r.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case r.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case r.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case r.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case r.MONTH_DAY:return{month:"long",day:"numeric"};case r.SHORT_MONTH:return{month:"short"};case r.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case r.DAY:return{day:"numeric"};case r.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case r.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case r.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case r.TIME:return{hour:"numeric",minute:"2-digit"};case r.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case r.HOUR:return{hour:"numeric"};default:throw Error('invalid dateFormatType "'+e+'"')}};function s(e,t,i,r=!0){let s=a(i);r&&(s.timeZone="UTC");let n=new Intl.DateTimeFormat(e,s);return n.format(t)}},81226:(e,t,i)=>{i.d(t,{Z:()=>r});function r(e){let t=Math.round(e/1e3),i=t%60;return Math.floor(t/60)+":"+(i<10?"0":"")+i}},722767:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(667294),a=i(973935);function s(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class n extends r.Component{constructor(...e){super(...e),s(this,"observer",null),s(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){let e=a.findDOMNode(this);e instanceof HTMLElement&&(this.node=e),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.node),delete this.observer)}render(){return r.Children.only(this.props.children)}}let o=n},375571:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(667294),a=i(395164),s=i(67347);function n(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class o extends r.Component{constructor(...e){super(...e),n(this,"state",{error:null,info:null}),n(this,"resetError",()=>{this.setState({error:null,info:null})})}componentDidCatch(e,t){try{let{name:t}=this.props,i=this.props.type||"secondary";(0,a.T)({extraData:e.extraData??{},errorBoundary:t,errorBoundaryType:i,message:e.message,name:e.name,stack:e.stack}),(0,s.nP)("react.error_boundary",{sampleRate:.1,tags:{component:void 0,name:this.props.name}})}catch(e){(0,s.nP)("react.error_boundary.error",{sampleRate:1,tags:{name:this.props.name}})}this.setState({error:e,info:t})}render(){let{renderErrorState:e}=this.props,{error:t,info:i}=this.state;return t&&i?e?e({error:t,info:i,resetError:this.resetError}):null:this.props.children}}},319915:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(375571);let a=r.Z},320415:(e,t,i)=>{i.d(t,{Z:()=>y});var r=i(667294),a=i(702664),s=i(112690),n=i(332611),o=i(214494);let l=(e,t,i,r)=>(a,s)=>l=>{if(a&&a.id){let d=o.Z.create(e,{placed_experience_id:a.id,extra_context:{}});switch(t){case"dismissed":d.callDelete().then(()=>{l((0,n.fO)()),i&&r&&i({event_type:r,object_id_str:a.id.toString()})});break;case"completed":d.callUpdate().then(()=>{s||l((0,n.fO)()),i&&r&&i({event_type:r,object_id_str:a.id.toString()})});break;case"viewed":d.callUpdate().then(()=>{i&&r&&i({event_type:r,object_id_str:a.id.toString()})})}}},d=e=>l("UserExperienceCompletedResource","completed",e,6567),u=l("UserExperienceResource","dismissed"),c=e=>l("UserExperienceViewedResource","viewed",e,4503);var h=i(785893);function p(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class m extends r.Component{constructor(...e){super(...e),p(this,"state",{hasCompleted:[],hasDismissed:[]}),p(this,"view",()=>{let{experience:e,isBackendExperience:t,targeting:i,viewExperience:r,viewExperienceObject:a}=this.props;e&&"viewed"!==e.status&&(t?(e.status="viewed",a(e)):i?r(e.placement_id,e.experience_id,i):r(e.placement_id,e.experience_id))}),p(this,"complete",e=>{let{completeExperience:t,completeExperienceObject:i,experience:r,isBackendExperience:a,preventRemoval:s,targeting:n}=this.props,o=e||1;if(r&&!this.state.hasCompleted.includes(r.experience_id)){let{placement_id:e,experience_id:l}=r||{},d=s||2===o;(1===o||d)&&e&&l&&(a?i(r,d):n?t(e,l,d,n):t(e,l,d),this.setState(e=>({hasCompleted:[...e.hasCompleted,l]})))}}),p(this,"dismiss",()=>{let{dismissExperience:e,dismissExperienceObject:t,experience:i,isBackendExperience:r,preventRemoval:a,targeting:s}=this.props,{placement_id:n,experience_id:o}=i||{};i&&!this.state.hasDismissed.includes(o)&&(r?t(i):s?e(n,o,!!a,s):e(n,o,!!a),this.setState(e=>({hasDismissed:[...e.hasDismissed,o]})))}),p(this,"isEligibleExperience",()=>{let{experience:e}=this.props;if(!e)return!1;let{eligibleIds:t,eligibleTypes:i,predicate:r,transitionType:a}=this.props,{experience_id:s,type:n}=e;return t&&t.length?t.includes(s):i&&i.length?i.includes(n):r?r(e):!a||a===n})}componentDidMount(){if(this.props.disableAutoView)return;let{experience:e}=this.props;e&&this.isEligibleExperience()&&this.view()}componentDidUpdate(e){if(this.props.disableAutoView)return;let t=e.experience,i=this.props.experience;i&&this.isEligibleExperience()&&(t&&t.experience_id===i.experience_id||this.view())}render(){let{children:e,experience:t,disableAutoView:i}=this.props;return t&&this.isEligibleExperience()?"function"==typeof e?e({experience:t,complete:this.complete,dismiss:this.dismiss,...i?{view:this.view}:Object.freeze({})}):r.Children.only(e):null}}function y(e){let t=(0,a.useSelector)(({experiences:t})=>e.experience||(e.placementId?t[e.placementId]:void 0)),i=(0,a.useDispatch)(),r=(0,n.be)(),o=(0,n.Am)(),l=(0,n.Ig)(),p=(0,s.Z)();return(0,h.jsx)(m,{...e,completeExperience:(e,t,a,s)=>i(r(e,t,a,!1,{},s)),completeExperienceObject:(e,t)=>i(d(p)(e,t)),dismissExperience:(e,t,r,a)=>i(o(e,t,r,void 0,a)),dismissExperienceObject:e=>i(u(e)),experience:t,viewExperience:(e,t,r)=>i(l(e,t,!1,!1,void 0,r)),viewExperienceObject:e=>i(c(p)(e))})}p(m,"defaultProps",{eligibleIds:[],eligibleTypes:[]})},333312:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var r=i(667294),a=i(883119),s=i(320415),n=i(785893);function o(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends r.PureComponent{constructor(...e){super(...e),o(this,"onScroll",()=>{let{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout(()=>{e(),this.dismissed=!0,this.timer=void 0},3e3))}),o(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){let{anchor:e,text:t,thumbnails:i,idealDirection:r}=this.props,s=i.slice(-3);return(0,n.jsx)(a.J2,{anchor:e,color:"white",idealDirection:r,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:(0,n.jsxs)(a.xu,{alignContent:"center",display:"flex",justifyContent:"between",padding:3,width:"100%",children:[(0,n.jsx)(a.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:(0,n.jsx)(a.xv,{color:"default",weight:"bold",children:t})}),(0,n.jsx)(a.xu,{display:"flex",marginEnd:-2,paddingX:2,children:s.map(e=>(0,n.jsx)(a.xu,{height:60,paddingX:1,width:50,children:(0,n.jsx)(a.zd,{height:60,rounding:2,children:(0,n.jsx)(a.Ee,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e))})]})})}}var d=i(570470);function u(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends r.Component{constructor(...e){super(...e),u(this,"dismissRef",(0,r.createRef)()),u(this,"state",{paused:!1}),u(this,"dismissCb",()=>{this.dismissRef.current?.()}),u(this,"handlePulsarClick",(e,t)=>{e?this.setState({paused:!0}):t()})}componentWillUnmount(){let{anchor:e}=this.props;clearTimeout(this.timer),e?.removeEventListener("click",this.dismissCb)}setDefaultPulsarTooltip(e){e.has_pulsar=null==e.has_pulsar||e.has_pulsar,e.has_tooltip=null==e.has_tooltip||e.has_tooltip}getText(e,t,i){return(t&&e.text.replace("{boardName}",t),i)?i(e):e.text}render(){let{anchor:e,customWrapper:t,experienceIds:i,boardTextOverride:o,flyoutSize:u,fontSize:c,hasFullWidthButton:h=!0,idealDirection:p,useMasonryFlyout:m,noClickToDismiss:y,onClickComplete:f,onClickDismiss:g,placementId:v,positionRelativeToAnchor:b,shouldTimeoutDismiss:S,showCaret:_,textAlign:P,textOverflow:E,textOverrideFn:R,textWeight:T,customizedComplete:w,pulsarZIndex:k,advertiserId:D,dismissButtonLocation:A,dismissButtonColor:x,dismissButtonMarginTop:C}=this.props,I=t||(({children:e})=>m?(0,n.jsx)(a.mh,{children:e}):e);return(0,n.jsx)(s.Z,{eligibleIds:i,eligibleTypes:[8],placementId:v,targeting:D?{advertiserId:parseInt(D,10)}:null,children:({complete:t,dismiss:i,experience:s})=>{let{display_data:{scroll_to_dismiss:v,scroll_to_dismiss_delay_in_seconds:D=0,...O}}=s,L=v&&e,N=()=>{j(),setTimeout(i,1e3*D)},j=()=>{L&&(window.removeEventListener("scroll",N),window.removeEventListener("touchmove",N))},F=()=>{j(),t()};if(L&&(window.addEventListener("scroll",N),window.addEventListener("touchmove",N)),this.setDefaultPulsarTooltip(O),!O.has_pulsar&&!O.has_tooltip)return F(),null;S&&O.disappearTime&&O.disappearTime>0&&(this.timer=setTimeout(()=>(N(),null),O.disappearTime));let M=501041===s.experience_id||505086===s.experience_id;return O.has_tooltip&&!O.has_pulsar&&(this.dismissRef.current=N,e?.addEventListener("click",this.dismissCb)),(0,n.jsxs)(r.Fragment,{children:[O.has_pulsar&&(0,n.jsx)(d.Z,{anchor:e,leftOverride:M?342:void 0,onTouch:()=>this.handlePulsarClick(O.has_tooltip,F),paused:this.state.paused,topOverride:M?-5:void 0,zIndex:k&&k.index()}),O.has_tooltip&&(!O.has_pulsar||this.state.paused)&&(O.thumbnail_urls?(0,n.jsx)(l,{anchor:e,dismiss:N,idealDirection:p||"down",text:O.text,thumbnails:O.thumbnail_urls}):(0,n.jsx)(I,{children:(0,n.jsx)(a.J2,{_deprecatedShowCaret:_,anchor:e,color:"deprecatedBlue",idealDirection:p||"down",onDismiss:y?()=>{}:N,positionRelativeToAnchor:!m&&b,shouldFocus:!1,size:u,children:(0,n.jsxs)(a.xu,{column:12,padding:3,children:[(0,n.jsxs)(a.xv,{align:"right"===P?"end":P,color:"inverse",overflow:E,size:c,weight:T||"bold",children:[this.getText(O,o,R),O.secondary_cta_link&&(0,n.jsx)(a.xu,{display:"inlineBlock",marginStart:1,children:(0,n.jsx)(a.xv,{color:"inverse",size:c,weight:"bold",children:(0,n.jsx)(a.rU,{display:"inlineBlock",href:O.secondary_cta_link.url,target:"blank",underline:"hover",children:O.secondary_cta_link.text})})})]}),O.sub_text&&(0,n.jsx)(a.xu,{paddingY:2,children:(0,n.jsx)(a.xv,{color:"inverse",size:c,children:O.sub_text})}),(O.dismiss_button_text||O.complete_button_text)&&(0,n.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:A||"start",marginTop:C||2,children:[O.dismiss_button_text&&(0,n.jsx)(a.xu,{column:6,marginEnd:1,children:(0,n.jsx)(a.zx,{color:x||"blue",fullWidth:h,onClick:()=>{g&&g(),N()},size:"md",text:O.dismiss_button_text})}),O.complete_button_text&&(0,n.jsx)(a.xu,{column:O.dismiss_button_text?6:12,children:w?(0,n.jsx)(a.iP,{fullHeight:!0,onTap:()=>{F(),f&&f()},rounding:2,children:(0,n.jsx)(a.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"10px"}},display:"flex",justifyContent:"center",padding:2,rounding:2,children:(0,n.jsx)(a.xv,{color:"shopping",weight:"bold",children:O.complete_button_text})})}):(0,n.jsxs)(a.kC,{justifyContent:"center",children:[O.complete_button_cta_url&&(0,n.jsx)(a.ZP,{color:"white",fullWidth:h,href:O.complete_button_cta_url,onClick:({event:e})=>{e.preventDefault(),e.stopPropagation(),F(),f&&f()},size:"md",target:O.complete_button_cta_url?"blank":null,text:O.complete_button_text}),!O.complete_button_cta_url&&(0,n.jsx)(a.zx,{color:"white",fullWidth:h,onClick:()=>{F(),f&&f()},size:"md",text:O.complete_button_text})]})})]})]})})}))]})}})}}u(c,"defaultProps",{fontSize:"300",positionRelativeToAnchor:!0})},332611:(e,t,i)=>{let r;i.d(t,{Am:()=>g,Ig:()=>y,N:()=>_,Sd:()=>v,YX:()=>S,be:()=>f,fO:()=>h,kd:()=>b,pz:()=>p});var a=i(667294),s=i(214494),n=i(112690),o=i(764990),l=i(957191),d=i(186656),u=i(67347);let c=(e,t,i={})=>(0,u.nP)(`${e}.${t}`,{sampleRate:1,tags:i}),h=(e,t)=>i=>{let r=t?{extra_context:e,targeting:t}:{extra_context:e};return s.Z.create("UserExperiencePlatformResource",r).callGet().then(e=>e.resource_response?i((0,l.OD)(e.resource_response.data)):void 0)},p=(e,t,i,a)=>(n,d)=>{if(t)return Promise.resolve();if(a&&(r=a),1===e.length){let t=e[0],r=d().experiences,a=r[t],s=a?.extraContext||null;if(JSON.stringify(s)===JSON.stringify(i)||(0,o.E3)(a)&&!(i&&Object.keys(i).length>0))return Promise.resolve()}return s.Z.create("UserExperienceResource",{placement_ids:e,extra_context:i||null,targeting:a}).callGet().then(e=>e.resource_response?n((0,l.cL)(e.resource_response.data)):void 0)},m=(e,t,i,a)=>(n,o,d,u=!1,c,p)=>(m,y)=>{let{experiences:f,experiencesMulti:g}=y(),v=null,b=!0;if(u||(v=(b=f[n]&&f[n].experience_id===o)?f[n]:Array.isArray(g[n])&&g[n]?.find(e=>e.experience_id===o)),v&&v.experience_id===o||u&&n&&o){let u=s.Z.create(e,{placed_experience_id:`${n}%3A${o}`,extra_context:c??{},targeting:p}),y=b?l.Yb:l.xW;switch(t){case"dismissed":return u.callDelete().then(()=>{m(y(n,o,t)),m(h(void 0,r)),i&&a&&i({event_type:a,object_id_str:o.toString()})});case"completed":return u.callUpdate().then(()=>{!d&&(m(y(n,o,t)),m(h(void 0,r)),i&&a&&i({event_type:a,object_id_str:o.toString()}))});case"viewed":return m(y(n,o,t)),u.callUpdate().then(()=>{1000162===n&&m(h()),i&&a&&i({event_type:a,object_id_str:o.toString()})});case"completedWithoutHomefeed":return u.callUpdate().then(()=>{d||m(y(n,o,t)),i&&a&&i({event_type:a,object_id_str:o.toString()})})}}return Promise.resolve()},y=()=>{let e=(0,n.Z)(),t=(0,a.useCallback)(m("UserExperienceViewedResource","viewed",e,4503),[e]);return t},f=()=>{let e=(0,n.Z)(),t=(0,a.useCallback)(m("UserExperienceCompletedResource","completed",e,6567),[e]);return t},g=()=>{let e=(0,n.Z)(),t=(0,a.useCallback)(m("UserExperienceResource","dismissed",e,6568),[e]);return t},v=()=>{let e=(0,n.Z)(),t=(0,a.useCallback)(m("UserExperienceCompletedResource","completedWithoutHomefeed",e,6567),[e]);return t},b=(e,t)=>(i,r)=>{let{experiences:a}=r(),s=a[e];s&&s.triggerable_placed_exps&&s.triggerable_placed_exps.length&&s.triggerable_placed_exps.forEach(i=>{let[,r]=i.split(":"),a=t;s.metadata&&s.metadata[r]&&(a={...t,...s.metadata[r]}),(0,d.Z)({url:`/v3/experiences/${i.replace(":","%3A")}/trigger/`,method:"PUT",data:a?{extra_context:JSON.stringify(a,null,1)}:{}}).then(()=>{c("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:r})})})},S=e=>(t,i)=>{t(b(e));let{experiences:r}=i();return r[e]},_=(e,t,i)=>a=>{i&&(r=i),a(b(e,t)),t&&Object.keys(t).length>0&&a(p([e],!1,t,i))}},764990:(e,t,i)=>{i.d(t,{A0:()=>l,E3:()=>n,MQ:()=>o,fL:()=>d});var r=i(883119),a=i(149230),s=i(785893);function n(e){return!!e&&0!==e.type}let o=(e,t,i)=>{let r=e[i];return t[i]&&n(r)?r:null};function l(e){return e.display_data?.anchor}let d=e=>{let t=new DOMParser,i=t.parseFromString(e,"text/html"),n=[...i.body?.childNodes||[]].map(e=>{if("A"!==e.nodeName)return(0,s.jsx)(r.xv,{inline:!0,children:e.textContent});{let t=e.href||"",i=(0,a.Z)({url:t});return(0,s.jsx)(r.rU,{display:"inline",externalLinkIcon:i?"default":"none",href:t,rel:i?"nofollow":"none",target:"blank",children:e.textContent})}});return(0,s.jsx)(r.xv,{inline:!0,children:n})}},207737:(e,t,i)=>{i.d(t,{$S:()=>r,V$:()=>a,_4:()=>n,iY:()=>o,mR:()=>s});let r="REFRESH_ALL_EXPERIENCES_MULTI",a="UPDATE_EXPERIENCE_MULTI",s="FETCH_EXPERIENCES",n="REFRESH_ALL_EXPERIENCES",o="UPDATE_EXPERIENCE"},957191:(e,t,i)=>{i.d(t,{NW:()=>o,OD:()=>d,Yb:()=>l,cL:()=>u,xW:()=>n});var r=i(214494),a=i(207737);let s=e=>({type:a.$S,payload:{experiencesMulti:e}}),n=(e,t,i)=>({type:a.V$,payload:{placementId:e,experienceId:t,status:i}}),o=e=>t=>r.Z.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then(e=>e.resource_response?t(s(e.resource_response.data)):void 0),l=(e,t,i)=>({type:a.iY,payload:{placementId:e,experienceId:t,status:i}}),d=e=>({type:a._4,payload:{experiences:e}}),u=e=>({type:a.mR,payload:{experiences:e}})},570470:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(883119),a=i(667294),s=i(785893);let n=(e,t,i,r)=>({horizontalOffset:-(r/2-t/2),verticalOffset:-(i/2-e/2)});function o({anchor:e,children:t,zIndex:i,leftOverride:o,topOverride:l}){let d=(0,a.useRef)(null),[u,c]=(0,a.useState)(0),[h,p]=(0,a.useState)(0),{height:m,width:y}=e.getBoundingClientRect();return(0,a.useEffect)(()=>{let{current:t}=d;if(e&&t){let{height:e,width:i}=t.getBoundingClientRect(),{horizontalOffset:r,verticalOffset:a}=n(m,y,e,i);c(r),p(a)}}),(0,s.jsx)(r.xu,{ref:d,dangerouslySetInlineStyle:{__style:{left:o||u,top:l||h}},"data-test-id":"center-box",position:"absolute",zIndex:i?new r.Ry(i):void 0,children:t})}let l=function(e){let{anchor:t,leftOverride:i,onTouch:a,onMouseEnter:n,paused:l,size:d,topOverride:u,zIndex:c}=e;return t?(0,s.jsx)(o,{anchor:t,leftOverride:i,topOverride:u,zIndex:c,children:(0,s.jsx)(r.iP,{fullWidth:!1,onMouseEnter:n,onTap:({event:e})=>a(e),rounding:"circle",children:(0,s.jsx)(r.o3,{paused:l,size:d})})}):null}},121151:(e,t,i)=>{i.d(t,{ZP:()=>d,b7:()=>n.b7,bN:()=>o,p4:()=>l});var r=i(240684),a=i(50286),s=i(785893),n=i(968121);let o=(0,r.ZP)({resolved:{},chunkName:()=>"DesktopModal",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(51879).then(i.bind(i,373420)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>373420}),l=(0,r.ZP)({resolved:{},chunkName:()=>"MobileModal",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(72430).then(i.bind(i,430322)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>430322});function d(e){let t=(0,a.ZP)(),i=void 0===e.isOpen||e.isOpen;if("desktop"===t&&i){let{isOpen:t,mobileAccessibilityCloseIconLabel:i,mobileAllowScroll:r,mobileHideCloseIcon:a,mobileIsFullscreen:n,mobileIsSlideUp:l,type:d,mobileIsFooter:u,zIndex:c,...h}=e;return(0,s.jsx)(o,{...h})}let{allowMediaPlay:r,allowScroll:n,role:d,size:u,_dangerouslyDisableScrollBoundaryContainer:c,...h}=e;return(0,s.jsx)(l,{...h,isOpen:i})}},968121:(e,t,i)=>{i.d(t,{JN:()=>d,Vf:()=>u,ZM:()=>o,b7:()=>n,i_:()=>l});var r=i(883119),a=i(643010),s=i(379764);let n=new r.Ry(1e3),o=new r.H3([s.Z]),l=12,d=({variant:e})=>({__style:"fullscreen"===e?{touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"90vw",height:"70vh",borderRadius:"8px",zIndex:1,left:"5vw",bottom:"13vh",overflowY:"hidden"}:"tablet"===e?{border:void 0,borderRadius:"32px",top:"50%",left:"50%",minWidth:"350px",touchAction:"none",transform:"translate(-50%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1}:"footer"===e?{border:(0,a.Yc)()?void 0:"1px solid #efefef",bottom:0,boxShadow:"0 0 16px rgba(0,0,0, 0.16)",left:0,touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1}:"signup"===e?{border:void 0,borderRadius:"32px",top:"50%",touchAction:"none",transform:"translate(0%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1,left:"8px",right:"8px",background:"#FFFFFF"}:{border:(0,a.Yc)()?void 0:"1px solid #efefef",touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1,left:"0px",bottom:0,boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",overflow:"hidden",borderRadius:"32px 32px 0 0"}}),u=({isFullscreen:e,isTablet:t,isShowing:i,isRelatedInterestsModal:r})=>{let s={border:(0,a.Yc)()?void 0:"1px solid #efefef",touchAction:"none",width:"100vw",height:"",zIndex:1,left:0,bottom:0,borderRadius:"32px 32px 0px 0px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)"},n=i?"translateY(0)":"translateY(100vh)";return s.height=e?"100vh":"",t&&r&&(s={...s,width:425,left:"50%",transform:"translateX(-50%)"},n=i?"translate(-50%, 0)":"translate(-50%, 100vh)"),{__style:{...s,transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",transform:n}}}},499128:(e,t,i)=>{i.d(t,{UZ:()=>d,Vg:()=>l,ZP:()=>u});var r=i(667294),a=i(883119),s=i(50286),n=i(829407),o=i(785893);let l=200,d=({deviceType:e,hiding:t,visible:i})=>{let r="desktop"===e,a=0,s=r?"translateY(200px)":"translateY(-200px)",n="opacity 0.1s ease-in-out",o="hidden";return i&&!t&&(a=1,s="translateY(0)",n="all 0.7s cubic-bezier(.19, 1.15, .48, 1)",o="visible"),i&&t&&(s="scale(1.1)",n="opacity transform 0.2s"),{opacity:a,pointerEvents:"auto",position:"relative",marginTop:r?10:0,transform:s,transition:n,visibility:o}};function u({_dangerouslySetThumbnail:e,_dangerouslySetPrimaryAction:t,text:i,primaryAction:u,dismissButton:c,helperLink:h,thumbnail:p,type:m,dataTestId:y,duration:f=2e3,onHide:g,href:v,onClick:b,openNewPage:S,imageUrl:_}){let P;let E=(0,s.ZP)(),[R,T]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),D=(0,r.useRef)(),A=()=>{T(!0),D.current=setTimeout(g,l)},x=()=>{D.current=setTimeout(A,f)},C=()=>{D.current&&clearTimeout(D.current)};(0,n.Z)(()=>(setTimeout(()=>k(!0),100),x(),C)),_&&(P={image:(0,o.jsx)(a.Ee,{alt:"string"==typeof i?i:`${i[0]} ${i[1]}`,fit:"cover",naturalHeight:1,naturalWidth:1,src:_})});let I=(0,o.jsx)(a.FN,{_dangerouslySetPrimaryAction:t,_dangerouslySetThumbnail:e,dismissButton:c,helperLink:h,primaryAction:u,text:i,thumbnail:P??p,type:m}),{marginTop:O,opacity:L,pointerEvents:N,position:j,transform:F,transition:M,visibility:V}=d({deviceType:E,hiding:R,visible:w});return(0,o.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{transform:F,transition:M,visibility:V,pointerEvents:N}},"data-test-id":y??"toast",display:"flex",marginTop:O,onMouseEnter:C,onMouseLeave:x,opacity:L,position:j,children:v?(0,o.jsx)(a.Tg,{href:v,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{v.startsWith("#")&&(e.preventDefault(),t()),b?.(e)},rounding:"pill",target:S?"blank":null,children:I}):I})}},356997:(e,t,i)=>{i.d(t,{qE:()=>o,u_:()=>l.ZP});var r=i(883119),a=i(785893);let s=(e,t)=>{let i=e?.includes("images/user/default");return!!(i&&t)};function n({accessibilityLabel:e,name:t,outline:i,size:n,src:o,verified:l}){return(0,a.jsx)(r.qE,{accessibilityLabel:e,name:t,outline:i,size:n,src:s(o,t)?void 0:o,verified:l})}n.displayName="Avatar";let o=n;var l=i(121151);i(499128)},694379:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(892819),a=i(780280),s=i(785893);let n=({currency:e,maximumFractionDigits:t,minimumFractionDigits:i,shortform:n,shortformMaximumFractionDigits:o,formatStyle:l,uplimit:d,value:u})=>{let c=(0,r.Z)();return(0,s.jsx)(a.LC,{children:r=>c(r.locale||"en-US",u,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:i,shortform:n,shortform_maximum_fraction_digits:o,style:l,uplimit:d})})}},898781:(e,t,i)=>{i.d(t,{ZP:()=>o,oz:()=>s,q6:()=>a});var r=i(425288);let{Provider:a,Consumer:s,useHook:n}=(0,r.Z)("i18n"),o=n},892819:(e,t,i)=>{i.d(t,{Z:()=>d});var r=i(898781),a=i(66699);let s=(e,t)=>{let i=t||0,r=10**i,a=+(i?e*r:e).toFixed(8),s=Math.floor(a),n=a-s,o=n>.49999999&&n<.50000001?s%2==0?s:s+1:Math.round(a);return i?o/r:o},n=({maximumFractionDigits:e,minimumFractionDigits:t,style:i,currency:r})=>{let a={maximumFractionDigits:e,minimumFractionDigits:t};return i?{...a,style:i,..."currency"===i?{currency:r,currencyDisplay:"symbol"}:{}}:a},o=e=>{try{0..toLocaleString([e])}catch(e){return!1}return!0},l=(e,t)=>{if(t){let{minimumFractionDigits:i,maximumFractionDigits:r}=new Intl.NumberFormat(e,{style:"currency",currency:t}).resolvedOptions();if(void 0!==i&&void 0!==r)return{minimumFractionDigits:i,maximumFractionDigits:r}}return{minimumFractionDigits:2,maximumFractionDigits:2}};function d(){let e=(0,r.ZP)();return(t,i,r)=>{let d=0,u=0,c=r&&r.style||void 0,h=r&&r.shortform||!1,p=r&&r.uplimit||void 0,m=r&&r.currency||void 0,y=!!p&&i>=p,f=p&&y?p:i;if("currency"===c){let{minimumFractionDigits:e,maximumFractionDigits:i}=l(t,m);d=void 0===r||void 0===r.maximum_fraction_digits?i:r.maximum_fraction_digits,u=void 0===r||void 0===r.minimum_fraction_digits?e:r.minimum_fraction_digits}else d=void 0===r||void 0===r.maximum_fraction_digits?0:r.maximum_fraction_digits,u=void 0===r||void 0===r.minimum_fraction_digits?0:r.minimum_fraction_digits;if(h&&f>999&&(d=void 0===r||void 0===r.shortform_maximum_fraction_digits?2:r.shortform_maximum_fraction_digits,u=0),d<u)return String(f);let g=f,v="",b=[{"100M":{value:1e8,localeKey:e.bt("å„„", "å„„", "Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.", undefined, true)}},{"10k":{value:1e4,localeKey:e.bt("ä¸‡", "ä¸‡", "Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.", undefined, true)}}],S=[{b:{value:1e9,localeKey:e.bt("B", "B", "Abbreviation for one billion.", undefined, true)}},{m:{value:1e6,localeKey:e.bt("M", "M", "Abbreviation for one million.", undefined, true)}},{k:{value:1e3,localeKey:e.bt("k", "k", "Abbreviation for one thousand.", undefined, true)}}],_=/^zh|ja|ko/.test(t);if(h&&f>999){let e=_?b:S;for(let t=0;t<e.length;t+=1){let i=Object.keys(e[t])[0],r=e[t][i].value;if(f>=r){g=s(f/r*Math.pow(10,d))/Math.pow(10,d),v=e[t][i].localeKey;break}}}if(null==g)return"";let P=g.toLocaleString([o(t)&&"ar-SA"!==t?t:"en-US"],n({maximumFractionDigits:d,minimumFractionDigits:u,currency:m,style:c}));return v&&v.length>0?(0,a.Z)(e.bt("{{formattedNumber}}{{numberSuffix}}", "{{formattedNumber}}{{numberSuffix}}", "i18n.usePrettyNumberFormat.prettyNumberFormat", undefined, true),{formattedNumber:P,numberSuffix:v})+(y?"+":""):P+(y?"+":"")}}},12610:(e,t,i)=>{function r(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z3:()=>c,LU:()=>h,ZP:()=>p});let a=window.location.search.includes("debug_impressions=1")||document.cookie&&document.cookie.indexOf("debug_impressions=1")>-1,s={paused:"Pause",resumed:"Resume",stopped:"Flush",enter:"Enter viewport",exit:"Exit viewport"},n={},o={background:"#FF8A8A",transform:"scale(.98)"},l={init:e=>({transform:`scale(${n[e]?.8:.99})`,transition:"transform .2s ease-in-out",background:"#8E8E8E"}),[s.enter]:{background:"#A0DCC8",transform:"scale(.99)"},[s.exit]:o,[s.stopped]:o,[s.paused]:o,[s.resumed]:{background:"#0FA573",transform:"scale(.99)"}};class d{constructor(e){r(this,"setMutationObserver",e=>(this.mutationObserver=e,this)),r(this,"startMutationObserver",e=>{this.mutationObserver&&this.mutationObserver.observe(this.node,e)}),r(this,"stopMutationObserver",()=>{this.mutationObserver&&this.mutationObserver.disconnect()}),r(this,"handleIntersectionChange",e=>{let t=e.intersectionRatio>0||e.isIntersecting;if(t&&!this.inViewport){let e=Date.now();this.startTime=e,this._debug(s.enter,{startTime:e,node:this.node}),this.enterCallbacks.forEach(e=>e())}else!t&&this.inViewport&&(this._debug(s.exit,!0),this.exitCallbacks.forEach(e=>e(this.toJSON())));this.inViewport=t}),this.enterCallbacks=[],this.exitCallbacks=[],this.inViewport=!1,this.node=e,this.startTime=0,this.debugId=""}onEnterViewport(e){return this.enterCallbacks.push(e),this}onExitViewport(e){return this.exitCallbacks.push(e),this}setDebugId(e){return this.debugId=e,a&&Object.assign(this.node.style,l.init(e)),this}pause(){return this.inViewport&&(this._debug(s.paused,!0),this.exitCallbacks.forEach(e=>e(this.toJSON()))),this}resume(){if(this.inViewport){let e=Date.now();this._debug(s.resumed,{startTime:e}),this.startTime=e}return this}stop(e){return this.inViewport&&(this._debug(s.stopped,!0),this.exitCallbacks.forEach(t=>t(this.toJSON(e)))),this}toJSON(e=""){return{startTime:1e6*this.startTime,endTime:1e6*Date.now(),forcedExit:e}}toDebugJSON(){return{pinID:this.debugId,startTime:this.startTime,endTime:Date.now(),duration:`${(Date.now()-this.startTime)/1e3} seconds`}}_debug(e,t){if(a)switch(window.console.log(`ðŸ“Œ ${e} -- ${this.debugId}`),!0===t&&window.console.log(this.toDebugJSON()),"object"==typeof t&&window.console.log(t),l[e]&&Object.assign(this.node.style,l[e]),e){case s.flushed:case s.paused:case s.exit:n[this.debugId]=!0}}}function u(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let c=!0,h=!1;class p{constructor(){u(this,"_delegateChange",e=>{e.forEach(e=>{let t=this.activeImpressions.get(e.target);t&&t.handleIntersectionChange(e)})}),u(this,"_handleMutations",(e,t)=>{let i=this.mutationObservers.get(t),r=i&&i.offsetHeight<1;r&&i&&this.stop(i,"removed")}),this.activeImpressions=new Map,this.mutationObservers=new Map,this.bottomHeight=0,this.bottomObstructions=new Set,this.pausePriority=h,this.observer=new window.IntersectionObserver(this._delegateChange),window.Cypress&&!window.activeImpressions&&(window.activeImpressions=new Map),this.paused=!1,this.topHeight=0,this.topObstructions=new Set,this.inExperiment=!1}setExperimentStatus(e){this.inExperiment!==e&&(this.inExperiment=e)}stop(e,t=""){let i=this.activeImpressions.get(e);i&&(i.stop(t),this.mutationObservers.delete(i.mutationObserver),i.stopMutationObserver(),this.activeImpressions.delete(e),window.activeImpressions?.delete(e),this.observer.unobserve(e))}start(e){let t=this.activeImpressions.get(e);return t||(t=new d(e),this.activeImpressions.set(e,t),window.activeImpressions?.set(e,t),this.observer.observe(e),t.setMutationObserver(new window.MutationObserver((e,t)=>this._handleMutations(e,t))),this.mutationObservers.set(t.mutationObserver,e),t.startMutationObserver({subtree:!0,attributes:!0,attributeFilter:["style"]})),t}pause(e=c){this.paused||(Array.from(this.activeImpressions.values()).forEach(e=>e.pause()),this.paused=!0,this.pausePriority!==h||(this.pausePriority=e))}resume(e=c){(e!==h||this.pausePriority!==c)&&this.paused&&(Array.from(this.activeImpressions.values()).forEach(e=>e.resume()),this.paused=!1,this.pausePriority=h)}addObstruction(e,t){"top"===e?this.topObstructions.add(t):"bottom"===e&&this.bottomObstructions.add(t),this._calculateRootMargins()}removeObstruction(e,t){"top"===e?this.topObstructions.delete(t):"bottom"===e&&this.bottomObstructions.delete(t),this._calculateRootMargins()}updateObstructions(){this._calculateRootMargins()}_calculateRootMargins(){let e=Array.from(this.topObstructions).reduce((e,t)=>{let{bottom:i}=t.getBoundingClientRect();return i>e?i:e},0),t=window.innerHeight-Array.from(this.bottomObstructions).reduce((e,t)=>{let{top:i}=t.getBoundingClientRect();return i<e?i:e},window.innerHeight);if(e!==this.topHeight||t!==this.bottomHeight){let i={rootMargin:`${-e}px 0px ${-t}px`};this.observer.disconnect(),this.observer=new window.IntersectionObserver(this._delegateChange,i),Array.from(this.activeImpressions.values()).forEach(e=>this.observer.observe(e.node)),this.topHeight=e,this.bottomHeight=t}}}},124580:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(12610);let a=new r.ZP},349700:(e,t,i)=>{i.d(t,{Wc:()=>l,bF:()=>u,nk:()=>o,r7:()=>c});var r=i(667294),a=i(785893);function s(e,t,i){return e.split(i).map(e=>{if(e.match(i)){let i=e.replace(/[\{\}]/g,"").trim();if(Object.prototype.hasOwnProperty.call(t,i))return t[i]}return e})}let n=/(\{\{\s*\w+\s*\}\})/g;function o(e,t){return s(e,t,n)}function l(e,t){return s(e,t,n).join("")}let d=/(\{\s*\w+\s*\})/g;function u(e,t){return s(e,t,d)}let c=({text:e})=>Array.isArray(e)?e.map((e,t)=>(0,a.jsx)(r.Fragment,{children:e},t)):e},567450:(e,t,i)=>{function r(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:()=>n});let a=new class{constructor(){r(this,"onResumeListeners",[]),r(this,"onPauseListeners",[]),r(this,"inExp",!1),r(this,"windowInFocus",!0)}setExperiment(e=!1){this.inExp=e}onSessionResume(e){return this.onResumeListeners.push(e),this}onSessionPause(e){return this.onPauseListeners.push(e),this}removeResumeListener(e){this.onResumeListeners.filter(t=>t!==e)}removePauseListener(e){this.onPauseListeners=this.onPauseListeners.filter(t=>t!==e)}getAppState(){return this.windowInFocus?0:void 0}},s=e=>{if(e.isHidden){let{reason:t}=e;a.windowInFocus=!1,a.onPauseListeners.forEach(e=>e(t))}else a.windowInFocus=!0,a.onResumeListeners.forEach(e=>e())};setTimeout(()=>{window.addEventListener("beforeunload",()=>s({isHidden:!0,reason:"beforeunload"})),window.addEventListener("focus",()=>s({isHidden:!1})),window.addEventListener("blur",()=>s({isHidden:!0,reason:"blur"})),window.addEventListener("pageshow",()=>s({isHidden:!1})),window.addEventListener("pagehide",()=>s({isHidden:!0,reason:"pagehide"})),void 0!==document.hidden?document.addEventListener("visibilitychange",()=>s(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",()=>s(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1)},0);let n=a},623568:(e,t,i)=>{i.d(t,{NK:()=>f,P6:()=>s,ZE:()=>m,Zt:()=>y,_J:()=>l,_S:()=>g,cL:()=>h,jL:()=>o,oN:()=>a,rM:()=>p,sV:()=>d,sY:()=>u});var r=i(179888);let a=5e3,s=a/r.gJ,n=["Uploaded by user"],o=(e,t)=>!!t&&!e,l=e=>!!e&&5!==e,d=e=>["email","messages","deep_linking"].includes(e),u=e=>!!e&&"gif"===e,c=e=>"pinstory"===e,h=({embedSrc:e,embedSubtype:t,embedType:i})=>!!e&&!u(i)&&!c(t),p=({link:e,mobileLink:t,trackedLink:i})=>!t&&!i&&!e,m=e=>/pin.it/gim.test(e||""),y=({link:e,mobileLink:t,origImageUrl:i,trackedLink:r})=>t||r||e||i||"",f=(e,t)=>({deeplinkUri:{android:`pin/${e}/repin`,iOS:`repin/${e}`},mwebUri:{pathname:`/pin/${e}/repin/`,state:{trackingParams:t.state?t.state.trackingParams:""}}});function g(e){for(let t of n)if(e===t)return!1;return!0}},311560:(e,t,i)=>{i.d(t,{Z:()=>r});let r=e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";case"CA":return"CA";case"GB":return"GB";case"FR":return"FR";case"DE":return"DE";case"AU":return"AU";case"IN":return"IN";default:return"OTHER"}}},886858:(e,t,i)=>{i.d(t,{Z:()=>n,k:()=>s});let r=new Set(["bookmarks","client_tracking_params","get_page_metadata","in_nux","invite_code","original_referrer","source","top_level_source","top_level_source_depth"]),a=e=>!r.has(e)&&!e.startsWith("__track__");function s(e){return e.split(/([^=]+=[^=]+),/).filter(Boolean).reduce((e,t)=>{let[i,r]=t.split("=");return e[i]=JSON.parse(r),e},{})}let n=e=>e?Object.keys("object"==typeof e&&e||{}).filter(e=>"string"==typeof e).filter(a).sort().map(t=>`${t}=${JSON.stringify(null==e[t]?null:e[t])}`).join(","):""},379725:(e,t,i)=>{i.d(t,{U:()=>d,b:()=>u});var r=i(214494),a=i(886858),s=i(718368),n=i(414327),o=i(523834);function l({fetchOptions:e,resource:t,retry:i}){return(d,u)=>{let{bookmark:c,paginationGroup:h,headers:p,options:m,refresh:y,schema:f}=e,g=(0,a.Z)(m);if(u().resources?.[t]?.[g]?.fetching&&!i)return Promise.resolve();let v=i?i.bookmark:c,b=v?{...m,bookmarks:[v],pagination_group:h}:m;return d((0,n.LQ)(t,m,!0)),r.Z.create(t,b).callGet(void 0,p).then(a=>{let{data:u}=a.resource_response,[h]=a.bookmarks||[];if(Array.isArray(u)&&0===u.length&&h&&h!==s.q){let r=i?i.count:0,a=r>=s.s;if(!a)return d(l({resource:t,fetchOptions:e,retry:{count:r+1,bookmark:h}}))}let{normalizedResponse:p,resourceSchema:g}=(0,o.f)({data:u,opts:{bookmark:c,options:m,schema:f},resource:t})||{normalizedResponse:null,resourceSchema:void 0};return c?(d((0,n.Dm)(t,m,a,p,g)),r.Z.fetchMoreCompleteCallback&&r.Z.fetchMoreCompleteCallback({resource:t,options:m,response:a,normalizedResponse:p,refresh:y,resourceSchema:g})):(d((0,n.Sr)(t,m,a,p,y,g)),r.Z.fetchCompleteCallback&&r.Z.fetchCompleteCallback({resource:t,options:m,response:a,normalizedResponse:p,refresh:y,resourceSchema:g})),Promise.resolve()},e=>{d((0,n.Tl)(t,m,e))})}}let d=(e,{bookmark:t,headers:i,options:r,schema:a,paginationGroup:s})=>l({resource:e,fetchOptions:{bookmark:t,headers:i,options:r,refresh:!1,schema:a,paginationGroup:s}}),u=(e,{headers:t,options:i,schema:r})=>l({resource:e,fetchOptions:{headers:t,options:i,refresh:!0,schema:r}})},338739:(e,t,i)=>{i.d(t,{AF:()=>r,KK:()=>a,aW:()=>o,cR:()=>s,se:()=>l,zP:()=>n});let r="CREATE_COMPLETE",a="FETCHING",s="FETCH_ERROR",n="FETCH_COMPLETE",o="FETCH_MORE_COMPLETE",l="RESOURCE_INVALIDATE"},414327:(e,t,i)=>{i.d(t,{Dm:()=>l,LQ:()=>s,Sr:()=>o,Tl:()=>n,XM:()=>a,jB:()=>d});var r=i(338739);function a(e,t,i,a){return{type:r.AF,payload:{resource:e,options:t,response:i,normalizedResponse:a}}}function s(e,t,i){return{type:r.KK,payload:{resource:e,options:t,isFetching:i}}}let n=(e,t,i)=>({type:r.cR,payload:{resource:e,options:t,error:i}});function o(e,t,i,a,s,n){return{type:r.zP,payload:{isRefresh:s,normalizedResponse:a,options:t,resource:e,response:i,schema:n}}}function l(e,t,i,a,s){return{type:r.aW,payload:{resource:e,options:t,response:i,normalizedResponse:a,schema:s}}}function d(e,t){return{type:r.se,payload:{resource:e,optionsOrOptionsKey:t}}}},784590:(e,t,i)=>{i.d(t,{Z:()=>h});var r=i(667294),a=i(702664),s=i(616550),n=i(886858),o=i(780280),l=i(379725),d=i(718368);let u={},c=({httpStatus:e})=>!e||e>=500;function h(e){let{enabledRouteRefresh:t,__unstableEnableSuspenseSupport:i,headers:h,name:p,noCache:m,options:y,schema:f}=e??{name:"DisabledResource",options:null},g=!e,v=(0,a.useDispatch)(),b=(0,n.Z)(y),S=(0,r.useRef)(null),_=(0,r.useRef)(),P=(0,s.k6)(),E=P&&"POP"!==P.action,R=e=>(e[p]||u)[b]||u,T=(0,a.useSelector)(({resources:e})=>R(e).nextBookmark),w=(0,a.useSelector)(({resources:e})=>R(e).data),k=(0,a.useSelector)(({resources:e})=>R(e).auxData),D=(0,a.useSelector)(({resources:e})=>R(e).error),A=(0,a.useSelector)(({resources:e})=>!!R(e).fetching),x="object"==typeof k&&"string"==typeof k?.pagination_group?k.pagination_group:void 0,C=!!D||void 0!==w,I=C&&!A&&T===d.q,O=!!(C&&t&&E&&!g),[L,N]=(0,r.useState)(O),j=(0,r.useCallback)((e,t)=>{S.current=v((0,l.U)(p,{options:y,schema:f,bookmark:e,headers:h,paginationGroup:t}))},[v,p,b,f,h]),F=()=>{S.current=v((0,l.b)(p,{options:y,schema:f,headers:h}))},{isBot:M}=(0,o.B)(),V=()=>{if(!g&&_.current!==b){let e=void 0===_.current;_.current=b,!C&&!A||e&&D&&c(D)?j():(!M&&m||O)&&F()}};(0,r.useEffect)(()=>{i||V()}),i&&V();let H=(0,r.useCallback)(()=>{g||(F(),N(!0))},[g,l.b,p,b,h,N]),U=(0,r.useCallback)(()=>{!T||I||A||g||j(T,x)},[g,j,T,I,A,x]);if(S.current){if(C&&!A)S.current=null;else if(i)throw S.current}let Z=(0,r.useRef)({auxData:void 0,data:void 0,error:void 0,fetchMore:U,isAtEnd:!1,isFetching:!1,isLoaded:!1,isRefreshing:!1,nextBookmark:void 0,refresh:H}),z={auxData:k,data:w,error:D,fetchMore:U,isAtEnd:I,isFetching:A,isLoaded:C,isRefreshing:L,nextBookmark:T,refresh:H};return(0,a.shallowEqual)(z,Z.current)||(L&&(Z.current.data||!O)&&!(0,a.shallowEqual)(z.data,Z.current.data)&&(z.isRefreshing=!1,N(!1)),Z.current=z),Z.current}},947599:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(995228);let a=r.Z},595371:(e,t,i)=>{i.d(t,{i:()=>r});let r={AC:"ac",AUTOCOMPLETE:"autocomplete",DIRECT_NAVIGATION:"direct_navigation",FILTER:"filter",GUIDED_SEARCH_ENTRY:"guided_search_entry",GUIDED_SEARCH_LANDING:"guided_search_landing",HASHTAG_CLOSEUP:"hashtag_closeup",HASHTAG_PINREP:"hashtag_pinrep",HOMEFEED_BUBBLE:"homefeed_bubble",HUB_PAGE:"hub_page",IMAGE_ONLY_ATTRIBUTION:"image_only_attribution",LANDING_PAGE_STORY:"landing_page_story",NO_RESULTS_SEARCH_STORY:"no_results_search_story",PRODUCT:"product",REMOVE:"remove",RS:"rs",SITELINKS_SEARCHBOX:"sitelinks_searchbox",SLP_REC_CURATED:"slp_rec_curated",SLP_REC_TRENDING:"slp_rec_trending",SRS:"srs",STRUCTURED_GUIDE:"structured_guide",TRENDING:"trending",TYPED:"typed",TYPO_AUTO_ORIGINAL:"typo_auto_original",TYPO_SUGGESTION:"typo_suggestion",UNKNOWN:"Unknown",VANILLA_GUIDE:"guide",VIDEO:"video"}},858416:(e,t,i)=>{i.d(t,{Wr:()=>c,Hx:()=>p,RC:()=>h});var r=i(667294),a=i(425288),s=i(924687),n=i(311541),o=i(785893);let l=()=>Promise.resolve().then(i.bind(i,924687)),{Provider:d,useHook:u}=(0,a.Z)("IdeaPinVideoPlayer");function c({children:e}){let[t,i]=(0,n.Z)(l,s.initialState),a=(0,r.useMemo)(()=>({dispatch:i,ideaPinVideoPlayerControls:t}),[i,t]);return(0,o.jsx)(d,{value:a,children:e})}function h(){let{dispatch:e}=u();return(0,r.useMemo)(()=>({updateSeekTime:(t,i)=>{e({type:"UPDATE_SEEK_TIME",payload:{seekTime:t,pinId:i||""}})},clearSeekTime:t=>{e({type:"CLEAR_SEEK_TIME",payload:{seekTime:void 0,pinId:t||""}})},updateSeekingIdeaPin:t=>{t?e({type:"UPDATE_SEEKING_IDEA_PIN",payload:{isSeekingIdeaPin:t}}):e({type:"UPDATE_SEEKING_IDEA_PIN",payload:{isSeekingIdeaPin:t,seekTime:void 0}})},updateCurrentTime:t=>{e({type:"UPDATE_CURRENT_TIME",payload:{currentTime:t}})},updateDuration:t=>{e({type:"UPDATE_DURATION",payload:{duration:t}})}}),[e])}function p(){let{ideaPinVideoPlayerControls:e}=u();return e}},924687:(e,t,i)=>{i.r(t),i.d(t,{default:()=>a,initialState:()=>r});let r={seekTime:void 0,seekTimes:{},isSeekingIdeaPin:!1,currentProgressInfo:{currentTime:0,duration:0}};function a(e=r,t){switch(t.type){case"UPDATE_SEEK_TIME":return{...e,seekTimes:{...e.seekTimes,[t.payload.pinId]:t.payload.seekTime},seekTime:t.payload.seekTime};case"CLEAR_SEEK_TIME":return{...e,seekTimes:{},seekTime:void 0};case"UPDATE_SEEKING_IDEA_PIN":return{...e,isSeekingIdeaPin:t.payload.isSeekingIdeaPin};case"UPDATE_CURRENT_TIME":return{...e,currentProgressInfo:{...e.currentProgressInfo,currentTime:t.payload.currentTime}};case"UPDATE_DURATION":return{...e,currentProgressInfo:{...e.currentProgressInfo,duration:t.payload.duration}};default:return e}}},985913:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(858142);let a=/\{\{\s*(\w+)\s*\}\}/g,s=(e,t)=>(0,r.Z)(a,e,t)},858791:(e,t,i)=>{i.d(t,{Z:()=>r});let r=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},858142:(e,t,i)=>{i.d(t,{Z:()=>r});let r=(e,t,i)=>t?t.replace(e,(e,t)=>i&&Object.prototype.hasOwnProperty.call(i,t)?i[t]:""):""},66699:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(985913),a=i(858791);let s=(e,t)=>{let i={};return Object.keys(t).forEach(e=>{i[e]=t[e]?(0,a.Z)(t[e].toString()):""}),(0,r.Z)(e,i)}},343341:(e,t,i)=>{i.d(t,{F9:()=>s,Zo:()=>a});var r=i(425288);let{Provider:a,useHook:s}=(0,r.Z)("toastManagerContext")},149230:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(954931);let a=({url:e})=>!!(e&&e.match(/^https{0,1}:\/\//)&&!(0,r.Z)(e))},311541:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(667294);function a(e,t){let i=(0,r.useRef)([]),[a,s]=(0,r.useState)(),[n,o]=(0,r.useReducer)(a??(()=>t),t),l=(0,r.useCallback)(t=>{a?o(t):(i.current.length||e().then(e=>{s(()=>e.default)}),i.current=[...i.current,t])},[e,a]);return(0,r.useEffect)(()=>{a&&(i.current.forEach(o),i.current=[])},[a]),[n,l]}},829407:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(667294);let a=e=>{(0,r.useEffect)(e,[])}},562559:(e,t,i)=>{i.d(t,{Z:()=>P});var r=i(667294),a=i(293041),s=i(883119),n=i(112690),o=i(391254),l=i(773285),d=i(780280),u=i(19121),c=i(969315),h=i(179888),p=i(965900),m=i(539766),y=i(785893);function f(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let g=(e,t)=>typeof e!=typeof t||(Array.isArray(t)?e.length!==t.length||t.some((t,i)=>!Array.isArray(e)||t.type!==e[i].type||t.src!==e[i].src):t!==e),v=(e,t)=>t?e.replace("v1.pinimg.com","control"===t?"v3.pinimg.com":"v2.pinimg.com"):e,b=(e,t)=>e[0].src&&t?[{...e[0],src:v(e[0].src,t)}]:e,S=(e,t)=>"string"==typeof e?v(e,t):Array.isArray(e)?b(e,t):e;class _ extends r.PureComponent{constructor(...e){super(...e),f(this,"state",{canPlayVideo:!1,isManifestParsed:!1,playbackState:h.Cy.DEFAULT,videoStartTime:this.props.seekTime||0}),f(this,"errorRetryCount",1),f(this,"firstFragBuffered",!1),f(this,"hasPlaybackStarted",!1),f(this,"hasVideoSessionStarted",!1),f(this,"hasVideoSessionEnded",!1),f(this,"hls",null),f(this,"fragStartupTime",{}),f(this,"lastLevelSwitchKbps",null),f(this,"lastStallTime",null),f(this,"lastPauseTime",null),f(this,"logSessionStartOnNextPlay",!1),f(this,"playerId",""),f(this,"videoSessionId",""),f(this,"videoVisibleTime",null),f(this,"playbackPerformance",{canPlayTime:null,detailedErrors:"",downloadedKiloBytes:0,errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:"string"==typeof this.props.src?v(this.props.src,this.props.quicExpGroup):v(this.props.src[0].src,this.props.quicExpGroup),totalStallDurationMs:0,totalPauseDurationMs:0,videoCreatedTime:null}),f(this,"initializeHls",()=>{this.destroyHls();let{src:e,hlsConfig:t,quicExpGroup:i}=this.props,r=new a.ZP(t),s=S(e,i);r.loadSource(s),this.videoPlayerRef&&r.attachMedia(this.videoPlayerRef.video),r.on(a.ZP.Events.FRAG_BUFFERED,this.handleHlsFragBuffered),r.on(a.ZP.Events.FRAG_CHANGED,this.handleHlsFragChanged),r.on(a.ZP.Events.FRAG_LOADING,this.handleHlsFragLoading),r.on(a.ZP.Events.FRAG_LOADED,this.handleHlsFragLoaded),r.on(a.ZP.Events.MANIFEST_PARSED,()=>{this.setState({isManifestParsed:!0})}),r.on(a.ZP.Events.LEVEL_SWITCHED,this.handleHlsLevelSwitched),r.on(a.ZP.Events.ERROR,this.handleHlsError),this.hls=r}),f(this,"destroyHls",()=>{let{hls:e}=this;e&&e.destroy()}),f(this,"addSegment",e=>{let{segments:t}=this.playbackPerformance,i=t&&t[t.length-1];if(this.hls&&t.length&&i&&i.uri!==e.url){this.updateWatchDurationForCurrentSegment();let i=this.videoPlayerRef&&this.videoPlayerRef.video,r=this.hls&&this.hls.levels||{},a="number"==typeof e.level?r[e.level]:{},s=this.fragStartupTime[e.url],n=-1;s&&s.startLoadTime&&s.endLoadTime&&(n=s.endLoadTime-s.startLoadTime);let o={indicatedKbps:a.bitrate/h.bR,duration:e.duration,level:e.level,lastStartPlayTime:this.getCurrentVideoTime(),numServerAddressChange:-1,observedKbps:this.hls&&this.hls.bandwidthEstimate/h.bR||-1,playbackStartDate:Date.now(),serverAddress:"",sn:e.sn,sourceWidth:a.width,sourceHeight:a.height,startupTimeMs:n,switchBitrateKbps:this.lastLevelSwitchKbps||-1,uri:e.url,viewportWidth:i&&i.clientWidth||-1,viewportHeight:i&&i.clientHeight||-1,watchedDurationMs:0};t.push(o)}}),f(this,"initializeSegments",e=>{let{contextLogData:t={}}=this.props,{is_closeup_video:i=!1}=t,{segments:r}=this.playbackPerformance;if(!r.length){if(!this.hls||!this.videoPlayerRef||!this.videoPlayerRef.video||!e){(0,c.tE)("initializeSegmentsFailed",!0,i);return}if(!r.length&&"number"==typeof e.level){let t=this.videoPlayerRef&&this.videoPlayerRef.video,{levels:i}=this.hls,a="number"==typeof e.level?i[e.level]:{},s=this.fragStartupTime[e.url],n=-1;s&&s.startLoadTime&&s.endLoadTime&&(n=s.endLoadTime-s.startLoadTime),this.lastLevelSwitchKbps=this.hls.bandwidthEstimate/h.bR;let o={indicatedKbps:a.bitrate/h.bR,duration:e.duration,level:e.level,lastStartPlayTime:null,numServerAddressChange:-1,observedKbps:this.hls.bandwidthEstimate/h.bR||-1,playbackStartDate:null,serverAddress:"",sn:e.sn,sourceWidth:a.width,sourceHeight:a.height,startupTimeMs:n,switchBitrateKbps:this.lastLevelSwitchKbps||-1,uri:e.url,viewportWidth:t.clientWidth,viewportHeight:t.clientHeight,watchedDurationMs:0};r.push(o)}}}),f(this,"getCurrentVideoTime",()=>this.videoPlayerRef&&this.videoPlayerRef.video?this.videoPlayerRef.video.currentTime*h.gJ:null),f(this,"handleCanPlayVideo",e=>{let{contextLogData:t={},onReady:i,playing:r}=this.props,{is_closeup_video:a=!1}=t,{canPlayVideo:s}=this.state;(0,c.tE)("handleCanPlayVideo",!0,a,{firstCanPlayEvent:!s,playing:r}),this.playbackPerformance.hasFatalError=!1,s||(this.playbackPerformance.canPlayTime=new Date),this.setState({canPlayVideo:!0}),i&&i(e)}),f(this,"handleEnded",e=>{let{loop:t,onEnded:i}=this.props,{segments:r}=this.playbackPerformance,a=r&&r[r.length-1];t&&this.videoPlayerRef&&this.videoPlayerRef.video?(this.updateWatchDurationForCurrentSegment(),a&&(a.lastStartPlayTime=0),this.fragStartupTime={}):t||this.logPlaybackPerformance(h.$f,{initiator:"videoEnded",loop:t}),this.setState({playbackState:h.Cy.ENDED}),i&&i(e)}),f(this,"handleHlsError",(e,t)=>{let{contextLogData:i={}}=this.props,{is_closeup_video:r=!1}=i;if(this.playbackPerformance.detailedErrors+=`${this.playbackPerformance.detailedErrors.length>0?", ":""}${t.details}`,t.fatal){this.playbackPerformance.hasFatalError=!0,this.playbackPerformance.errorName=t.type,this.playbackPerformance.errorReason=t.details,this.playbackPerformance.errorCode=t.response&&t.response.code?t.response.code:0;let e={errorName:t.type,errorReason:t.details,errorRetryCount:this.errorRetryCount,errorMessage:t.err?.message?.slice(0,50)||"unknown",errorResponse:t.response?.text?.slice(0,50)||"unknown",playbackState:this.state.playbackState};if((0,c.tE)("fatalError",!0,r,e),this.errorRetryCount>0)switch(this.errorRetryCount-=1,t.type){case a.ZP.ErrorTypes.NETWORK_ERROR:if(t.details===a.ZP.ErrorDetails.MANIFEST_LOAD_ERROR||t.details===a.ZP.ErrorDetails.MANIFEST_LOAD_TIMEOUT||t.details===a.ZP.ErrorDetails.MANIFEST_LOAD_PARSING_ERROR){let{src:e,quicExpGroup:t}=this.props,i=S(e,t);this.hls?.loadSource(i)}else this.hls?.startLoad();break;case a.ZP.ErrorTypes.MEDIA_ERROR:this.hls?.recoverMediaError()}}this.updateWatchDurationForCurrentSegment(),this.setState({playbackState:h.Cy.FAILED})}),f(this,"handleHlsFragBuffered",(e,t)=>{this.firstFragBuffered||(this.initializeSegments(t.frag),this.firstFragBuffered=!0)}),f(this,"handleHlsFragChanged",(e,t)=>{this.addSegment(t.frag)}),f(this,"handleHlsFragLoading",(e,t)=>{let i=t.frag?.url;i&&!this.fragStartupTime[i]&&(this.fragStartupTime[i]={startLoadTime:new Date})}),f(this,"handleHlsFragLoaded",(e,t)=>{t.frag&&t.frag.loaded&&(this.playbackPerformance.downloadedKiloBytes+=t.frag.loaded/h.Fm);let i=t.frag?.url;i&&this.fragStartupTime[i]&&this.fragStartupTime[i].startLoadTime&&(this.fragStartupTime[i].endLoadTime=new Date)}),f(this,"handleHlsLevelSwitched",()=>{this.hls&&this.hls.bandwidthEstimate&&(this.lastLevelSwitchKbps=this.hls.bandwidthEstimate/h.bR)}),f(this,"handleLoadedMetadata",()=>{this.setState({playbackState:h.Cy.LOADED_METADATA})}),f(this,"handleLoadStart",()=>{this.playbackPerformance.loadStartTime=new Date,this.setState({playbackState:h.Cy.LOAD_START})}),f(this,"handleLoadedData",()=>{this.setState({playbackState:h.Cy.LOADED_DATA})}),f(this,"handlePlaying",e=>{this.playbackPerformance.hasFatalError=!1,this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.updateStallDuration(),this.updatePauseDuration(),this.setState({playbackState:h.Cy.PLAYING}),this.props.clearSeekTime&&this.props.clearSeekTime(),this.props.onPlaying&&this.props.onPlaying(e)}),f(this,"handleUserPause",e=>{let{onControlsPause:t}=this.props;this.lastPauseTime=new Date,t&&t(e)}),f(this,"handleVideoPause",()=>{this.state.playbackState===h.Cy.STALLING||this.state.playbackState===h.Cy.SEEKING||(this.updateWatchDurationForCurrentSegment(),this.lastPauseTime||this.updateStallDuration()),this.setState({playbackState:h.Cy.PAUSED})}),f(this,"handleSeeking",()=>{this.playbackPerformance.numberOfSeeks+=1;let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&(t.lastStartPlayTime=null),this.state.playbackState!==h.Cy.ENDED&&this.setState({playbackState:h.Cy.SEEKING})}),f(this,"handleStalled",()=>{null===this.lastStallTime&&this.state.playbackState!==h.Cy.ENDED&&(this.lastStallTime=new Date,this.playbackPerformance.numberOfStalls+=1),this.setState({playbackState:h.Cy.STALLING})}),f(this,"handleTimeUpdate",e=>{let{onTimeChange:t}=this.props;t&&t(e),this.state.playbackState===h.Cy.PLAYING&&(this.updateWatchDurationForCurrentSegment(),this.setLastSegmentStartPlayTime())}),f(this,"resetPlaybackMetrics",()=>{this.hasPlaybackStarted=!1,this.hasVideoSessionStarted=!1,this.hasVideoSessionEnded=!0,this.lastLevelSwitchKbps=null,this.lastStallTime=null,this.lastPauseTime=null,this.videoSessionId="",this.videoVisibleTime=null,this.logSessionStartOnNextPlay=!1;let e=this.playbackPerformance.segments[this.playbackPerformance.segments.length-1],t={...e,lastStartPlayTime:null,playbackStartDate:null,switchBitrateKbps:-1,watchedDurationMs:0};this.playbackPerformance.detailedErrors="",this.playbackPerformance.downloadedKiloBytes=0,this.playbackPerformance.errorCode=0,this.playbackPerformance.errorName="",this.playbackPerformance.errorReason="",this.playbackPerformance.hasFatalError=!1,this.playbackPerformance.numberOfStalls=0,this.playbackPerformance.numberOfSeeks=0,this.playbackPerformance.playbackStartTimestamp=null,this.playbackPerformance.totalStallDurationMs=0,this.playbackPerformance.segments=[t]}),f(this,"setLastSegmentStartPlayTime",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.lastStartPlayTime&&(t.lastStartPlayTime=this.getCurrentVideoTime())}),f(this,"setLastSegmentPlaybackStartDate",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.playbackStartDate&&(t.playbackStartDate=Date.now())}),f(this,"setPlaybackStartTime",()=>{this.hasPlaybackStarted||(this.playbackPerformance.playbackStartTimestamp=Date.now(),this.hasPlaybackStarted=!0)}),f(this,"setVideoPlayerRef",e=>{let{setVideoRef:t}=this.props;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoPlayerRef.video)){let e=this.videoPlayerRef.video;e.addEventListener("loadedmetadata",this.handleLoadedMetadata),e.addEventListener("loadeddata",this.handleLoadedData),e.addEventListener("pause",this.handleVideoPause),e.readyState>=3&&(this.setState({canPlayVideo:!0}),this.playbackPerformance.canPlayTime=new Date)}}),f(this,"updateStallDuration",()=>{null!==this.lastStallTime&&(this.playbackPerformance.totalStallDurationMs+=new Date-this.lastStallTime,this.lastStallTime=null)}),f(this,"updatePauseDuration",()=>{if(null!==this.lastPauseTime){let{lastPauseTime:e}=this;this.playbackPerformance.totalPauseDurationMs+=new Date-e,this.lastPauseTime=null}}),f(this,"updateWatchDurationForCurrentSegment",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1],i=t?t.lastStartPlayTime:null,r=this.getCurrentVideoTime();if(t&&null!==i&&"number"==typeof r&&"number"==typeof i){let e=r-i;e>0&&(t.watchedDurationMs+=e,t.lastStartPlayTime=null)}}),f(this,"logPlaybackPerformance",(e,t)=>{let{contextLogData:i={},userId:r,isAutoPlay:a,logContextEvent:s,preload:n}=this.props,{is_closeup_video:o=!1}=i,{canPlayTime:l,detailedErrors:d,downloadedKiloBytes:u,errorCode:p,errorName:m,errorReason:y,hasFatalError:f,playbackStartTimestamp:g,totalPauseDurationMs:v,totalStallDurationMs:b,segments:S,srcString:_,loadStartTime:P,numberOfStalls:E,numberOfSeeks:R}=this.playbackPerformance,T=this.videoPlayerRef&&this.videoPlayerRef.video,w=e===h.DR,k=w&&!this.hasVideoSessionStarted,D=!w&&!this.hasVideoSessionEnded&&this.hasVideoSessionStarted;if(this.hls&&T&&(k||D)){let k=-1;l&&P&&(k=l>P?l-P:0);let D=-1;l&&this.videoVisibleTime&&(D=l>this.videoVisibleTime?l-this.videoVisibleTime:0),w&&(this.videoSessionId=(0,h.Y7)(r),this.playerId=this.playerId||(0,h.EB)());let A={autoplaying:a,averageVideoKbps:-1,detailedErrors:d,downloadedKiloBytes:u,isCellular:!1,errorCode:p,errorName:m,errorReason:y,fatalError:f,nativeVideoDurationMs:T.duration*h.gJ||-1,numberOfStalls:E,numberOfSeeks:R,overallPausedDurationMs:v,overallBufferDurationMs:b,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:this.videoSessionId,playbackStartTimestamp:g||-1,segments:[],sessionMark:e,screenPixelScale:window?.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:T.clientWidth,startupPlayerHeight:T.clientHeight,startupTimeMs:k,startupLatencyMs:D,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:T.videoWidth,startupVariantHeight:T.videoHeight,videoUrl:_,wasVideoPreloaded:"auto"===n};if(!w&&S.length){let{levels:e}=this.hls,t=S[0];this.updateWatchDurationForCurrentSegment(),this.updateStallDuration();let i=S.reduce((t,i)=>{if(!i||"number"!=typeof i.level||!e||!(e.length>0))return t;{let r=(e[i.level]||{}).bitrate,a=i.watchedDurationMs;return t+r*(a||0)/h.gJ}},0),r=S.reduce((e,t)=>e+(t.watchedDurationMs||0),0),a=null,s=0,n=0;do s+=S[n].watchedDurationMs,a=a||S[n].level,n+=1;while(n<S.length&&S[n].level===a)A.startupVariantKbps=t.indicatedKbps,A.startupVariantWatchedDurationMs=s,A.startupVariantWidth=t.sourceWidth,A.startupVariantHeight=t.sourceHeight,A.startupPlayerWidth=t.viewportWidth,A.startupPlayerHeight=t.viewportHeight,A.overallWatchedDurationMs=r,r>0?(A.averageVideoKbps=i/(r/h.gJ),A.rebufferRate=this.playbackPerformance.totalStallDurationMs/r):0===r&&(A.averageVideoKbps=-1,A.rebufferRate=-1,A.errorName="invalid_watch_duration"),A.segments=S}else A.errorName="invalid_watch_duration";(0,c.ZP)(A,!0,o,{playbackState:this.state.playbackState,...t});let{clientTrackingParams:x,component:C,durationNs:I,element:O,objectId:L,pairId:N,viewData:j,view:F,viewParameter:M,...V}=i;s({aux_data:{...V,is_closeup_video:o,playback_session_id:this.videoSessionId},clientTrackingParams:x,component:C,duration_ns:I,element:O,event_data:{videoPerformanceData:A},event_type:3606,object_id_str:L,pair_id:N,view_data:j,view_parameter:M,view_type:F}),w?(this.hasVideoSessionStarted=!0,this.hasVideoSessionEnded=!1):this.resetPlaybackMetrics(),(0,c.tE)(w?"sessionStart":"sessionEnd",!0,o,{playbackState:this.state.playbackState,...t})}})}componentDidMount(){let{contextLogData:e={},playing:t}=this.props,{is_closeup_video:i=!1}=e;this.playbackPerformance.videoCreatedTime=new Date,this.initializeHls(),(0,c.tE)("videoMounted",!0,i),t&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(h.DR,{initiator:"mount"}))}componentDidUpdate(e){let{loop:t,playing:i,src:r,visible:a,appInFocus:s,seekTime:n,captionsEnabled:o}=this.props,l=this.videoPlayerRef?.video?.textTracks[0];l&&(o?l.mode="showing":l.mode="disabled",l.addEventListener("cuechange",()=>{let e=l.activeCues&&l.activeCues.length>0&&l.activeCues[0];e&&e.line&&(e.line=-6,e.size=88)})),n&&n!==e.seekTime&&this.setState({videoStartTime:n}),g(e.src,r)&&this.initializeHls(),e.appInFocus&&!s&&(this.logPlaybackPerformance(h.$f,{initiator:"update",loop:t}),this.logSessionStartOnNextPlay=!0),e.visible&&!1===a&&(this.logSessionStartOnNextPlay=!1,this.updatePauseDuration(),this.logPlaybackPerformance(h.$f,{initiator:"update",loop:t})),!1===e.visible&&!0===a&&(this.videoVisibleTime=this.videoVisibleTime||new Date,i?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(h.DR,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),i&&s&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(h.DR,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)}componentWillUnmount(){let{loop:e}=this.props;this.updatePauseDuration(),this.logPlaybackPerformance(h.$f,{initiator:"unmount",loop:e}),this.destroyHls()}render(){let{aspectRatio:e,backgroundColor:t,captions:i,controls:r,loop:a,loopOverride:n,objectFit:l,onDurationChange:d,onFullscreenChange:u,onLoadedChange:c,onControlsPlay:h,onPlayheadDown:p,onPlayheadUp:f,onSeek:g,onVolumeChange:v,playbackRate:b,playing:_,playsInline:P,poster:E,preload:R,quicExpGroup:T,src:w,volume:k}=this.props,{canPlayVideo:D,isManifestParsed:A,videoStartTime:x}=this.state,C=S(w,T);return(0,y.jsxs)(s.xu,{children:[(0,y.jsx)(o.Z,{unsafeCSS:m.P}),(0,y.jsx)(s.nk,{ref:this.setVideoPlayerRef,aspectRatio:e,backgroundColor:t,captions:i,controls:r,loop:void 0===n?a:n,objectFit:l,onControlsPause:this.handleUserPause,onControlsPlay:h,onDurationChange:d,onEnded:this.handleEnded,onFullscreenChange:u,onLoadedChange:c,onLoadStart:this.handleLoadStart,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:p,onPlayheadUp:f,onPlaying:this.handlePlaying,onReady:this.handleCanPlayVideo,onSeek:g,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:v,onWaiting:this.handleStalled,playbackRate:b,playing:A&&D&&_,playsInline:P,poster:E,preload:R,src:C,startTime:x,volume:k})]})}}let P=(0,r.memo)(function(e){let{country:t,isAuthenticated:i,isBot:r,isSocialBot:a,unauthId:s,userAgent:o}=(0,d.B)(),h=(0,n.Z)(),m=(0,u.Z)(),{browserName:f,browserVersion:g,isMobile:v}=o,{contextLogData:b={}}=e,{is_closeup_video:S=!1,view:P,viewParameter:E}=b,{checkExperiment:R}=(0,l.F)(),T=null;i&&(T=R("web_video_quic").group.length?R("web_video_quic").group:null);let{appUI:w}=(0,p.I)(),k=R("web_video_fail_to_start_fix").anyEnabled?w.appInFocus:e.appInFocus;return(0,c.r$)({browserName:f,browserVersion:g,country:t,isAuthenticated:i,isBot:r,is_closeup_video:S,isMobile:v,isSocialBot:a,view:P,viewParameter:E}),(0,y.jsx)(_,{...e,appInFocus:k,logContextEvent:h,quicExpGroup:T,userId:m.id||s})})},994320:(e,t,i)=>{i.d(t,{W:()=>l,r:()=>o});var r=i(667294),a=i(425288),s=i(785893);let{Provider:n,useHook:o}=(0,a.Z)("VideoPlayer");function l({children:e}){let[t,i]=(0,r.useState)(!1),a=(0,r.useMemo)(()=>({captionsEnabled:t,setCaptionsEnabled:i}),[t]);return(0,s.jsx)(n,{value:a,children:e})}},969315:(e,t,i)=>{i.d(t,{ZP:()=>h,r$:()=>u,tE:()=>c});var r=i(311560),a=i(179888),s=i(67347);let n=["isCellular","videoUrl","sessionMark"],o={},l="",d=e=>e<0?"negative":0===e?"zero":e<200?"xs":e<400?"s":e<600?"m":e<800?"l":e<1e3?"xl":e<1200?"xxl":"over1200",u=e=>{let{browserName:t,browserVersion:i,country:a,isAuthenticated:s,isBot:n,isMobile:d,isSocialBot:u,view:c="unknown",viewParameter:h="unknown"}=e;l=u&&"socialBot"||n&&"bot"||"nonbot";let p=(0,r.Z)(a);o={browserName:t,browserVersion:i?.split(".")[0]||"0",isAuthenticated:s,isMobile:d,region:p,view:c,viewParameter:h}};function c(e,t,i,r={}){let a={...r,...o},n=`web.video.${t?"hls":"nonHls"}.${l}.${i?"closeup":"nonCloseup"}.${e}`;"nonbot"===l&&(0,s.nP)(n,{sampleRate:1,tags:a})}function h(e,t,i,r={}){let u=i?"closeup":"nonCloseup",c=t?"hls":"nonHls",h=e.sessionMark===a.DR?"sessionStart":"sessionEnd",p={...r,...o};if("nonbot"===l&&(Object.entries(e).forEach(([t,i])=>{let r=`web.video.${c}.${l}.${u}.${h}.${t}`,a=parseInt(i,10),o="number"==typeof a?a:-1;if(!n.includes(t)){if(t.includes("fatalError")&&!0===i){let{errorCode:t,errorName:i,errorReason:a}=e;(0,s.nP)(r,{sampleRate:1,tags:{errorCode:t,errorName:i,errorReason:a,...p}})}else if(t.includes("Width")||t.includes("Height")){let e=d(o);(0,s.nP)(r,{sampleRate:1,tags:{dimensionBucket:e,...p}})}else if("numberOfStalls"===t){let e=i;o>1e3?e="over1000":o>10?e="over10":o<0&&(e="negative"),(0,s.nP)(r,{sampleRate:1,tags:{numberOfStalls:e,...p}})}else"screenPixelScale"===t?(0,s.nP)(r,{sampleRate:1,tags:{screenPixelScale:i||-1,...p}}):o>=0?(0===o&&(0,s.nP)(`${r}.zero`,{sampleRate:1,tags:p}),(0,s.LY)(r,o,{sampleRate:1})):o<0&&(0,s.nP)(`${r}.negative`,{sampleRate:1,tags:p})}}),e.sessionMark!==a.DR)){let{rebufferRate:t,screenPixelScale:i,startupLatencyMs:r,startupVariantWidth:a,startupPlayerWidth:n}=e,o=`web.video.${c}.${l}.${u}.${h}`;"number"==typeof a&&"number"==typeof n&&"number"==typeof i&&(0,s.nP)(`${o}.upscaled.${1.5*a>i*n?"good":"bad"}`,{sampleRate:1,tags:p}),"number"==typeof r&&(0,s.nP)(`${o}.startupLatency.${r<500?"good":"bad"}`,{sampleRate:1,tags:p}),"number"==typeof t&&(0,s.nP)(`${o}.rebufferRate.${t<.01?"good":"bad"}`,{sampleRate:1,tags:p})}}},179888:(e,t,i)=>{i.d(t,{$f:()=>s,Cy:()=>d,DR:()=>a,EB:()=>h,Fm:()=>l,Y7:()=>c,bR:()=>o,gJ:()=>n,lG:()=>u});var r=i(172045);let a=1,s=2,n=1e3,o=1e3,l=1e3,d=Object.freeze({DEFAULT:0,LOAD_START:1,LOADED_METADATA:2,LOADED_DATA:3,PLAYING:4,PAUSED:5,SEEKING:6,STALLING:7,FAILED:8,ENDED:9}),u=Object.freeze({MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4});function c(e){return e+"-"+(0,r.Z)()}function h(){return(0,r.Z)()}},121630:(e,t,i)=>{i.d(t,{Z:()=>s,e:()=>a});var r=i(81226);let a=e=>{if("undefined"==typeof window)return"";let t=0,i=document.querySelector('[data-test-id="header"]');if(null!==i){let{height:e}=i.getBoundingClientRect();t+=e}switch(e){case"AuthHomefeed":let r=document.querySelector('[data-root-margin="more-ideas-tabs"]');if(null!==r){let{height:e}=r.getBoundingClientRect();t+=e}break;case"SearchItem":let a=document.querySelector('[data-root-margin="search-improvements-bar"]');if(null!==a){let{height:e}=a.getBoundingClientRect();t+=e}let s=document.querySelector('[data-test-id="search-tab-bar"],[data-root-margin="search-one-bar"]');if(null!==s){let{height:e}=s.getBoundingClientRect();t+=e}}return`${-1*t}px 0px 0px 0px`},s=({videosDuration:e,vHLSV4VideoDuration:t,storyPinDataTotalVideoDuration:i})=>{let a=(0,r.Z)(e||t||i||0);return a}},965900:(e,t,i)=>{i.d(t,{g:()=>h,I:()=>c});var r=i(667294),a=i(425288),s=i(567450),n=i(41861);let o={appInFocus:!0,footerPlusButtonVisible:!0,isAutoplay:!1,showTypeaheadOverlay:!1,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},viewportSize:"lg"},l=(e=o,t)=>{if("TOGGLE_TYPEAHEAD_OVERLAY"===t.type)return{...e,showTypeaheadOverlay:t.payload};if("SET_CURRENT_VIDEO"===t.type){let{payload:i}=t,{pinId:r,isPromoted:a,currentTime:s}=i,{videosAutoplaying:o}=e,{currentlyPlayingOrganicVideoId:l,promotedVideosAutoplaying:d,organicVideosAutoplaying:u}=o,c=(0,n.Z)(d),h=(0,n.Z)(u);return!a&&l?e:(a?c[r]={pinId:r,currentTime:s,paused:!1}:h[r]={pinId:r,currentTime:s,paused:!1},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:a?l:r,promotedVideosAutoplaying:c,organicVideosAutoplaying:h}})}if("SET_IS_AUTOPLAY"===t.type)return{...e,isAutoplay:t.payload};if("PAUSE_CURRENT_VIDEO"===t.type){let{payload:i}=t,{pinId:r,isPromoted:a,currentTime:s}=i,{videosAutoplaying:o}=e,{promotedVideosAutoplaying:l,organicVideosAutoplaying:d}=o,u=(0,n.Z)(l),c=(0,n.Z)(d);return a?u[r]={...u[r],paused:!0,currentTime:s}:c[r]={...c[r],paused:!0,currentTime:s},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,promotedVideosAutoplaying:u,organicVideosAutoplaying:c}}}if("SET_APP_FOCUS_STATE"===t.type)return{...e,appInFocus:t.payload};if("SET_VIEWPORT_SIZE"===t.type)return{...e,viewportSize:t.payload};if("SET_FOOTER_VISIBILITY_STATE"===t.type)return{...e,footerPlusButtonVisible:t.payload};return e};var d=i(785893);let{Provider:u,useHook:c}=(0,a.Z)("AppUI");function h({children:e}){let[t,i]=(0,r.useReducer)(l,o),a=(0,r.useCallback)(e=>i({type:"PAUSE_CURRENT_VIDEO",payload:e}),[]),n=(0,r.useCallback)(e=>i({type:"SET_APP_FOCUS_STATE",payload:e}),[]),c=(0,r.useCallback)(e=>i({type:"SET_CURRENT_VIDEO",payload:e}),[]),h=(0,r.useCallback)(e=>i({type:"SET_FOOTER_VISIBILITY_STATE",payload:e}),[]),p=(0,r.useCallback)(e=>i({type:"SET_IS_AUTOPLAY",payload:e}),[]),m=(0,r.useCallback)(e=>i({type:"SET_VIEWPORT_SIZE",payload:e}),[]),y=(0,r.useCallback)(e=>i({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:e}),[]),f=(0,r.useMemo)(()=>({pauseAutoplay:a,setCurrentVideo:c,setFooterPlusButtonVisible:h,setIsAutoplay:p,setViewportSize:m,toggleTypeaheadOverlay:y,setAppFocusState:n,appUI:t}),[a,c,h,p,m,y,n,t]);return(0,r.useEffect)(()=>{s.Z.onSessionResume(()=>{n(!0)}).onSessionPause(()=>{n(!1)})},[n]),(0,d.jsx)(u,{value:f,children:e})}},379764:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(883119),a=i(633988);let s=new r.H3([a.Z]),n=s},698330:(e,t,i)=>{i.d(t,{Tt:()=>c,cm:()=>u,kW:()=>l,kY:()=>h,mN:()=>d});var r=i(702664),a=i(425288),s=i(19121),n=i(785893);let{Provider:o,useHook:l}=(0,a.Z)("Users");function d(){let e=l();return t=>e[t]}function u(){let e=l();return(t,i=!1)=>{let r=Object.keys(e).find(i=>e[i].username===t);if(r||!i)return e[r??""]}}function c(){let{id:e}=(0,s.Z)(),t=l();return t[e??""]}function h({children:e}){let t=(0,r.useSelector)(({users:e})=>e,r.shallowEqual);return(0,n.jsx)(o,{value:t,children:e})}},814197:(e,t,i)=>{i.d(t,{Cq:()=>u,Dk:()=>h,Fk:()=>a,fS:()=>d,km:()=>c,lI:()=>n,lJ:()=>s,mS:()=>l,qW:()=>o});var r=i(883119);let a=new r.Ry(1),s=3,n=new r.Ry(s),o=2,l=new r.Ry(o),d=3,u=4,c=new r.Ry(5),h=new r.Ry(100)},398061:(e,t,i)=>{i.d(t,{Z:()=>o,e:()=>n});var r=i(883119),a=i(780280),s=i(785893);let n=new r.Ry(1);function o({children:e,isImagePinForUnauthOnTablet:t}){let{isAuthenticated:i}=(0,a.B)();return(0,s.jsxs)(r.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"pointer",width:t?"40vw":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!t||void 0,top:!0,zIndex:i?void 0:n,children:[(0,s.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",borderRadius:"6px 6px 0 0",WebkitTransition:"opacity .04s linear",transition:"opacity .04s linear"}},left:!0,opacity:.4,position:"absolute",right:!0,top:!0}),e]})}},633988:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(883119),a=i(398061);let s=new r.H3([a.e]),n=s},865607:(e,t,i)=>{i.d(t,{O:()=>d,Z:()=>u});var r=i(667294),a=i(883119),s=i(898781),n=i(966113),o=i(785893);let l={xs:12,sm:16,md:20,lg:24};function d({children:e}){let t=(0,s.ZP)();return(0,o.jsx)(a.u,{link:(0,o.jsx)(a.rU,{href:n.vBy,target:"blank",children:(0,o.jsx)(a.xv,{color:"inverse",size:"100",weight:"bold",children:t.bt("Learn more", "Learn more", "verifiedBadge.tooltip.link", undefined, true)})}),text:t.bt("This retailer meets Pinterest's Merchant Guidelines", "This retailer meets Pinterest's Merchant Guidelines", "merchantVerification.badge.tooltip", undefined, true),children:e})}function u({iconOnly:e,isVerifiedIdentity:t,isVerifiedMerchant:i,showText:n,size:u}){let c=(0,s.ZP)(),h=(0,o.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[(0,o.jsx)(a.JO,{accessibilityLabel:c.bt("Merchant verification badge icon", "Merchant verification badge icon", "merchantVerification.badge.icon", undefined, true),color:"shopping",icon:"workflow-status-ok",inline:!0,size:l[u]}),n&&(0,o.jsx)(a.xu,{marginStart:2,children:(0,o.jsx)(a.xv,{color:"shopping",inline:!0,weight:"bold",children:c.bt("Verified merchant", "Verified merchant", "creator.header.verifiedMerchant", undefined, true)})})]});return(0,o.jsxs)(r.Fragment,{children:[i&&!e&&(0,o.jsx)(d,{children:h}),i&&e&&h,t&&!i&&(0,o.jsx)(a.JO,{accessibilityLabel:c.bt("Domain verification icon", "Domain verification icon", "domainVerification.badge.icon", undefined, true),color:"error",icon:"check-circle",size:l[u]})]})}},523834:(e,t,i)=>{i.d(t,{J:()=>s,f:()=>n});var r=i(782677),a=i(483025);let s=(e,{bookmark:t,options:i,schema:r})=>{let s=r||a.Z[e];return"function"==typeof s?s({resource:e,options:i,bookmark:t}):s};function n({data:e,opts:{bookmark:t,options:i,schema:a},resource:n}){let o=s(n,{bookmark:t,options:i,schema:a}),l=o&&e?(0,r.Fv)(e,o):null;return{normalizedResponse:l,resourceSchema:o}}},956800:(e,t,i)=>{function r(e){return{type:"FEED_ITEM_REORDERED",payload:e}}function a(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}i.d(t,{EX:()=>n,N8:()=>a,Qv:()=>s,_f:()=>r,vX:()=>o});let s=(e,t,i=Object.freeze({}))=>({type:"APPEND_FEED_ITEMS",payload:{id:e,options:i,items:t}});function n(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}function o(e){return{type:"FEED_ITEMS_ADDED",payload:e}}},483025:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(819063);let a={AggregatedCommentResource:r.rm,AggregatedCommentFeedResource:r.LR,AggregatedCommentReplyResource:r.rm,AggregatedCommentReplyFeedResource:r.LR,AggregatedActivityFeedResource:r.LR,BestPinsFeedAltResource:r.LR,BoardArchiveResource:r.LR,BoardContentRecommendationResource:r.LR,BoardFeedResource:r.LR,BoardFollowingResource:r.LR,BoardInviteResource:r.sf,BoardInvitesResource:r.Ht,BoardlessPinsResource:r.LR,BoardPickerBoardsResource:{all_boards:r.LR,boards_shortlist:r.LR},BoardSectionEditResource:r._F,BoardSectionsRepinResource:r.LR,BoardSectionsResource:r.LR,BoardsFeedResource:r.LR,BoardResource:r.IY,BoardSectionResource:r._F,BoardSectionPinsResource:r.LR,BoardToolsFeedResource:r.LR,ContactRequestsResource:r.LR,ConversationsResource:r.LR,ConversationMessagesResource:r.dq,DidItCommentsResource:r.LR,DidItLikedByResource:r.Gn,DidItUserFeedResource:r.LR,HolidaySpotlightResource:r.LR,InterestFollowingResource:r.LR,InterestResource:r.cC,MoreIdeasTabsBoardsResource:r.LR,NewsHubResource:r.LR,NewsHubDetailsResource:r.LR,NewsHubSummaryResource:r.t6,NuxInterestsResource:r.LR,NuxTopicToCreatorsResource:r.Gn,PinResource:r.Cj,PinCatalogResource:r.LR,PinsFromBrandResource:r.LR,ReactionsResource:r.fE,RelatedArticlesResource:r.LR,RelatedInterestsResource:r.LR,RelatedModulesResource:r.LR,RelatedPinFeedResource:r.LR,RelatedProductFeedResource:r.LR,RelatedStreamResource:r.LR,RepinResource:r.Cj,BaseSearchResource:{results:r.LR},SearchResource:r.LR,SectionToolsFeedResource:r.LR,ShareSuggestionsTypeaheadResource:{items:r.LR},ShoppingFeedModularizedResource:r.LR,StoryFeedResource:r.LR,StoryPinTaggedProductsResource:r.LR,SuggestedCreatorFollowsResource:r.Gn,TodayArticleFeedResource:r.LR,IdeasHubTodayArticlesResource:r.LR,TodayArticleResource:r.iF,TodayTabInterestFeedResource:r.LR,TodayTabResource:r.LR,TopicFeedResource:r.LR,UnifiedCommentsResource:r.LR,UserActivityPinsResource:r.LR,UserFollowingResource:r.LR,UserRecentActivityResource:r.LR,UserHomefeedResource:r.LR,UserPinsResource:r.LR,UserSettingsResource:r.EA,UserStoryPinsFeedResource:r.LR,UserResource:r.EA,VideosFeedResource:r.LR,VisualLiveSearchResource:{results:r.LR},VisualLiveSearchProductFeedResource:r.LR,VisualSearchFlashlightUnifiedResource:r.LR,SeoTier1CandidateResource:r.LR},s=a},819063:(e,t,i)=>{i.d(t,{Cj:()=>d,EA:()=>s,Gn:()=>T,Ht:()=>R,IY:()=>l,LR:()=>k,_F:()=>h,cC:()=>b,dq:()=>m,fE:()=>c,iF:()=>v,rm:()=>n,sN:()=>w,sf:()=>S,t6:()=>E});var r=i(782677);let a=Object.freeze({aggregatedComment:"aggregatedComments",article:"articles",board:"boards",boardsection:"boardsections",contactrequest:"contactrequests",conversation:"conversations",conversationMessage:"conversationMessages",inbox:"inbox",notification:"notifications",pin:"pins",reaction:"reactions",story:"stories",todayArticle:"todayArticles",topic:"topics",triedit:"triedits",user:"users",invite:"collaboratorinvite"}),s=new r.fK.Entity(a.user),n=new r.fK.Entity(a.aggregatedComment,{user:s,tagged_users:[s]}),o=new r.fK.Entity(a.article),l=new r.fK.Entity(a.board),d=new r.fK.Entity(a.pin),u=new r.fK.Entity(a.reaction),c=new r.fK.Array(u),h=new r.fK.Entity(a.boardsection),p=new r.fK.Entity(a.conversationMessage,{sender:s,users:[s],board:l,pin:d,user:s}),m=new r.fK.Array(p),y=new r.fK.Entity(a.contactrequest),f=new r.fK.Entity(a.story),g=new r.fK.Entity(a.triedit),v=new r.fK.Entity(a.todayArticle,{article_creator_user:s,content_pin:d,content_pin_official_user:s,video_pin:d}),b=new r.fK.Entity(a.topic,{},{processStrategy:e=>({...e,slug:e.slug?e.slug:e.url_name?e.url_name.includes(":")?e.url_name.split(":")[1]:e.url_name:""})}),S=new r.fK.Entity(a.invite,{invited_by_user:s,invited_user:s,board:l},{idAttribute:e=>`${e.board.id}:${e.invited_user.id}`}),_=e=>{switch(e.type){case"aggregatedcomment":return"aggregatedComment";case"conversationMessage":return"conversationMessage";case"explorearticle":return"article";case"news":return"notification";case"interest":case"klp_featured_data":return"topic";case"userdiditdata":return"triedit";case"board_section":return"boardsection";case"todayarticle":return"todayArticle";default:return e.type}},P=new r.fK.Union({user:s,board:l,invite:S,pin:d,topic:b,triedit:g},_),E=new r.fK.Entity(a.notification,{content_items:[{content_object:P}],header_icon_objects:[P]}),R=new r.fK.Array(S),T=new r.fK.Array(s),w=new r.fK.Array(l),k=new r.fK.Array({aggregatedComment:n,article:o,board:l,boardsection:h,contactrequest:y,conversationMessage:p,notification:E,pin:d,story:f,todayArticle:v,topic:b,triedit:g,user:s},_,e=>{switch(e.type){case"collaboratorinvite":return e.board.id;case"category":return"key";default:return"id"}});f.define({objects:k})},492583:(e,t,i)=>{i.d(t,{Z:()=>r});let r={AGGREGATED_COMMENTS:"aggregatedComments",AGGREGATED_COMMENT_REPLIES:"aggregated-comment-replies",BOARDFEED:"boardfeed",BOARDLESS_PINS:"boardless-pins",BOARD_SECTIONS:"board-sections",BOARD_SECTION_PINS:"board-section-pins",STORY_PINS_FEED:"story-pins-feed",PROFILE_PINS_FEED:"profile-pins-feed",PROFILE_BOARDS:"profileBoards",SEARCH_PINS:"searchPins",STORY_PIN_DATA:"storyPinData",TODAY_ARTICLE_INTEREST_FEED:"todayArticleInterestFeed",TODAY_TAB:"todayTabFeed",UNIFIED_COMMENTS:"unified-comments",TRIED_IT_FEED:"trieditfeed"}},539766:(e,t,i)=>{i.d(t,{P:()=>p,Z:()=>y});var r=i(667294),a=i(293041),s=i(883119),n=i(366284),o=i(898781),l=i(391254),d=i(780280),u=i(50286),c=i(785893);function h(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let p=`
  video::cue {
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Helvetica, 'ãƒ’ãƒ©ã‚®ãƒŽè§’ã‚´ Pro W3', 'ãƒ¡ã‚¤ãƒªã‚ª', Meiryo, 'ï¼­ï¼³ ï¼°ã‚´ã‚·ãƒƒã‚¯', Arial, sans-serif;
    font-weight: 450;
    font-size: 18px;
  }
`;class m extends r.PureComponent{constructor(...e){super(...e),h(this,"state",{videoStartTime:0}),h(this,"setVideoPlayerRef",e=>{let{setVideoRef:t,handlePlay:i,autoplay:r=!0}=this.props;this.videoPlayerRef=e,e&&t&&t(e.video),this.videoPlayerRef&&this.videoPlayerRef.video&&i&&r&&this.videoPlayerRef.video.addEventListener("canplay",()=>{i({userTriggeredPlay:!1})})}),h(this,"hls",null),h(this,"initializeHls",()=>{this.destroyHls();let{src:e}=this.props,t=new a.ZP;a.ZP.isSupported()&&!(0,n.G6)(this.props.requestContext.userAgent.browserName)&&(t.loadSource(e),this.videoPlayerRef&&t.attachMedia(this.videoPlayerRef.video)),this.hls=t}),h(this,"destroyHls",()=>{let{hls:e}=this;e&&e.destroy()}),h(this,"onPlay",({event:e})=>{let{handlePlay:t}=this.props;e.stopPropagation(),t&&t({userTriggeredPlay:!0})}),h(this,"onPause",({event:e})=>{let{handlePause:t}=this.props;e.stopPropagation(),t&&t()}),h(this,"handleVolumeChange",({event:e,volume:t})=>{let{onVolumeChange:i}=this.props;e.stopPropagation(),i&&i({volume:t})}),h(this,"handleOnReady",e=>{this.props.onReady&&this.props.onReady(e)}),h(this,"handleEnded",()=>{let{onEnded:e}=this.props;e&&e()}),h(this,"handlePlaying",()=>{let{clearSeekTime:e}=this.props;e&&e()})}componentDidMount(){this.initializeHls()}componentWillUnmount(){this.destroyHls()}componentDidUpdate(e){let{activeStreamItemIndex:t,playing:i,src:r,seekTime:s,captionsEnabled:n,isDesktop:o,isTablet:l,requestContext:d,isVideoPin:u}=this.props,{isAuthenticated:c}=d;s&&s!==e.seekTime&&this.setState({videoStartTime:s});let h=this.videoPlayerRef?.video?.textTracks[0];h&&(n?h.mode="showing":h.mode="disabled",h.addEventListener("cuechange",()=>{let e=h.activeCues&&h.activeCues.length>0&&h.activeCues[0];e&&e.line&&(o?(e.line=-6,e.size=88):(c?e.line=-8:(e.line=-10,l&&(e.line=-15)),e.size=70),u&&(e.line=-5))})),t!==e.activeStreamItemIndex&&this.videoPlayerRef&&this.videoPlayerRef.video&&(this.videoPlayerRef.video.currentTime=0),e.src!==r&&(this.initializeHls(),this.hls&&this.hls.on(a.ZP.Events.MANIFEST_PARSED,()=>{void 0!==i&&i&&this.videoPlayerRef&&this.videoPlayerRef.play()}))}render(){let{aspectRatio:e,controls:t,loop:i=!1,poster:r,src:a,onTimeChange:n,playing:o,volume:d,captions:u}=this.props;return(0,c.jsxs)(s.xu,{width:"100%",children:[(0,c.jsx)(l.Z,{unsafeCSS:p}),(0,c.jsx)(s.nk,{ref:this.setVideoPlayerRef,aspectRatio:e,autoplay:o,captions:u,controls:t,loop:i,onControlsPause:this.onPause,onControlsPlay:this.onPlay,onEnded:this.handleEnded,onPlay:()=>{},onPlayError:()=>{},onPlaying:this.handlePlaying,onReady:this.handleOnReady,onTimeChange:n,onVolumeChange:this.handleVolumeChange,playing:o,playsInline:!0,poster:r,src:a,startTime:this.state.videoStartTime||void 0,volume:d})]})}}function y(e){let{clearSeekTime:t,pinId:i="",seekTime:r}=e,a=(0,o.ZP)(),s=(0,d.B)(),n=(0,u.HG)(),l=(0,u.Wb)();return(0,c.jsx)(m,{...e,clearSeekTime:()=>{t&&t(i)},i18n:a,isDesktop:n,isTablet:l,requestContext:s,seekTime:r})}},116674:(e,t,i)=>{i.d(t,{X:()=>u,f:()=>d});var r=i(667294),a=i(425288),s=i(623568);function n(e=null,t){switch(t.type){case"REPORT_CONTENT_SHOW":return{id:t.payload.id,isProduct:t.payload.isProduct,isPromoted:t.payload.isPromoted,parentId:t.payload.parentId,videoDuration:t.payload.videoDuration,viewParameter:t.payload.viewParameter,viewType:t.payload.viewType,type:t.payload.type,isThirdPartyAd:t.payload.isThirdPartyAd};case"REPORT_CONTENT_DISMISS":return null;default:return e}}var o=i(785893);let{Provider:l,useHook:d}=(0,a.Z)("ReportData");function u({children:e}){let[t,i]=(0,r.useReducer)(n,null),a=(0,r.useCallback)(()=>i({type:"REPORT_CONTENT_DISMISS"}),[]),d=(0,r.useCallback)((e,t,r)=>i({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,parentId:t,videoDuration:null,viewParameter:null,viewType:null,type:r}}),[]),u=(0,r.useCallback)((e,t,r)=>i({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:r,type:"conversation"}}),[]),c=(0,r.useCallback)((e,t,r)=>i({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:r,type:"pin"}}),[]),h=(0,r.useCallback)(({pinId:e,isDownstreamPromotion:t,hasPromoter:r,firstVideoDuration:a,isProduct:n,viewParameter:o,viewType:l,isThirdPartyAd:d})=>{let u=(0,s.jL)(t,r);i({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:n,isPromoted:u,videoDuration:a,viewParameter:o,viewType:l,type:"pin",isThirdPartyAd:d}})},[]),p=(0,r.useMemo)(()=>({reportData:t,dismiss:a,reportComment:d,reportConversation:u,reportImage:c,reportPin:h}),[t,a,d,u,c,h]);return(0,o.jsx)(l,{value:p,children:e})}},926749:(e,t,i)=>{i.d(t,{ZP:()=>E});var r=i(667294),a=i(883119),s=i(407043),n=i(766935),o=i(722767),l=i(773285),d=i(121630),u=i(944546),c=i(158103),h=i(785893);function p(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let m=[0,.25,.5,.75,.95,.97],y=[0,.5,.8,.99,1],f="-64px 0px 0px 0px",g={rootMargin:f,threshold:y},v={rootMargin:f,threshold:[...u.iM]},b=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function S(){return new Date().getTime()}function _(e){return!!e.volume&&e.volume>0}class P extends r.Component{constructor(e){super(e),p(this,"videoWrapperRef",(0,r.createRef)()),p(this,"handleWindowResize",()=>{if(!this.fullscreen){let e=this.getDimensions(),{height:t,width:i}=this.currentInterval;e.height!==t||e.width!==i?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}}),p(this,"handlePlayheadDown",({event:e})=>{let{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})}),p(this,"handlePlayheadUp",({event:e})=>{let{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})}),p(this,"handleLoop",()=>{this.videoTime=0}),p(this,"handlePlaying",e=>{this.logVideoStart(),this.props.onPlaying&&this.props.onPlaying(e)}),p(this,"handleTimeChange",e=>{let{seeking:t,ready:i}=this.state;if(!this.currentInterval.videoDuration)return;let r=1e3*e.time,a=function(e,t,i,r){if(e>t||i<=0)return null;for(let a of r){let r=a*i;if(e<=r&&t>r)return a}return null}(this.videoTime,r,this.currentInterval.videoDuration,m);if("number"==typeof a&&this.props.playing&&!t&&i){let e=S();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*a),quartilePercentValue:a})}this.videoTime=r,this.props.onTimeChange&&this.props.onTimeChange(e)}),p(this,"handleDurationChange",e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)}),p(this,"handleReady",e=>{let{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)}),p(this,"handleEnded",e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)}),p(this,"handleVisibilityChange",e=>{if(0===e.length)return;let t=e.slice(-1)[0],i=function(e,t){for(let i=0;i<t.length;i+=1){let r=t[i],a=t[i+1];if(null==a||r<=e&&e<a)return r}return null}(Number.parseFloat(t.intersectionRatio.toFixed(2)),y);"number"==typeof i&&(this.visible=i>=.5),null==i||i===this.currentInterval.viewability||this.fullscreen||(0===i?this.startNewInterval({viewability:i,playbackState:b.PAUSED}):this.startNewInterval({viewability:i}))}),p(this,"handleFullscreenChange",({event:e,fullscreen:t})=>{if(t){let{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})}),p(this,"handleClose",()=>{this.startNewInterval()}),p(this,"handleContextMenu",e=>{e.preventDefault()}),this.state={ready:!1,seeking:!1,started:!1};let t=S();this.handleWindowResize=(0,n.Z)(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:_(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1,this.visible=null}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){let i={};_(e)&&!_(this.props)?i.isAudible=!1:!_(e)&&_(this.props)&&(i.isAudible=!0);let r=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==r&&(i.playbackState=r),Object.keys(i).length>0&&this.startNewInterval(i)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?b.PLAYING:b.PAUSED:b.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){let i=this.videoWrapperRef.current;i.clientHeight&&i.clientWidth&&(e=i.clientHeight,t=i.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){let{closeupStoryPinViewability:i,contextLogData:r,logContextEvent:a,playing:s,surface:n}=this.props,{seeking:o}=this.state,{height:l,width:d,windowHeight:u,windowWidth:c,viewability:h,...p}=t;if(null!=l&&null!=d&&null!=u&&null!=c&&null!=h){let t={...p,gridAutoplay:6904===e&&s&&!o&&("AuthHomefeed"===n||"SearchItem"===n||"RelatedPinGrid"===n),height:l,width:d,windowHeight:u,windowWidth:c,viewability:i||h};a({event_type:e,...function(e){let{eventData:{videoEvent:{gridAutoplay:t,videoDuration:i,startTime:r,endTime:a,videoStartTime:s,videoEndTime:n,isAudible:o,height:l,width:d,playbackState:u,quartile:c,quartilePercentValue:h,windowHeight:p,windowWidth:m,viewability:y}},component:f,objectId:g,view:v,viewParameter:b,...S}=e;return{component:f,object_id_str:g,view_type:v,view_parameter:b,aux_data:{...S},event_data:{videoEventData:{gridAutoplay:t,videoDuration:i,time:r,endTime:a,videoTime:s,endVideoTime:n,isAudible:o,height:l,width:d,playbackState:u,quartile:c,quartilePercentValue:h,windowHeight:p,windowWidth:m,viewability:y}}}}({...r,view:this.fullscreen?108:r.view,eventData:{videoEvent:t}})})}}logFourthQuartileEvent(){let e=S();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}logVideoStart(){if(this.props.shouldLogVideoStart&&!this.state.started){let e=S();this.logVideoEvent(3621,{...this.currentInterval,startTime:e,endTime:e,videoEndTime:this.videoTime}),this.setState({started:!0})}}startNewInterval(e){let t=S();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){let{aspectRatio:e,backgroundColor:t,captions:i,contextLogData:r,controls:s,cropHeight:n,hlsConfig:l,inAdsDesktopVideoExperiment:u,isAutoPlay:p,loop:m,objectFit:y,onLoadedChange:f,onControlsPause:b,onControlsPlay:S,onSeek:_,onVolumeChange:P,playbackRate:E,playing:R,playsInline:T,poster:w,preload:k,rootMargin:D,src:A,surface:x,videoStartTime:C,volume:I}=this.props,{seeking:O}=this.state,L=u?v:g;return void 0!==D&&(L.rootMargin=x?(0,d.e)(x):D),(0,h.jsx)(o.Z,{onVisibilityChange:this.handleVisibilityChange,options:L,children:(0,h.jsx)(a.xu,{ref:this.videoWrapperRef,dangerouslySetInlineStyle:{__style:n?{display:"flex",alignItems:"center",height:`${n}px`}:{}},onContextMenu:this.handleContextMenu,children:(0,h.jsx)(c.default,{aspectRatio:n?236/n:e,backgroundColor:t,captions:i,contextLogData:r,controls:s,hlsConfig:l,isAutoPlay:p,loop:m,objectFit:y,onControlsPause:b,onControlsPlay:S,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:f,onLoop:this.handleLoop,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onPlaying:this.handlePlaying,onReady:this.handleReady,onSeek:_,onTimeChange:this.handleTimeChange,onVolumeChange:P,playbackRate:E,playing:!O&&R,playsInline:T,poster:w,preload:k,src:A,videoStartTime:C,visible:this.visible,volume:I})})})}}function E(e){let{logContextEvent:t}=(0,s.v)(),{checkExperiment:i}=(0,l.F)(),r=i("web_video_start_log").anyEnabled;return(0,h.jsx)(P,{...e,logContextEvent:t,shouldLogVideoStart:r})}p(P,"defaultProps",a.nk.defaultProps)},158103:(e,t,i)=>{i.r(t),i.d(t,{VideoWrapper:()=>T,default:()=>w,getPlaylistSourceSrc:()=>R});var r=i(667294),a=i(883119),s=i(366284),n=i(780280),o=i(858416),l=i(562559),d=i(994320),u=i(965900),c=i(407043),h=i(391254),p=i(773285),m=i(19121),y=i(969315),f=i(179888),g=i(539766),v=i(785893);function b(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function S(e,t){if(!e||void 0===e)return"undefined";if("string"==typeof e){let i=e;return t&&(i=e.replace("v1.pinimg.com","control"===t?"v3.pinimg.com":"v2.pinimg.com")),i}if(Array.isArray(e)&&e[0].src){let i=e[0].src;return t&&(i=i.replace("v1.pinimg.com","control"===t?"v3.pinimg.com":"v2.pinimg.com")),i}return`unsupported_type_${typeof e}`}class _ extends r.Component{constructor(...e){super(...e),b(this,"state",{canPlayVideo:!1,playbackState:f.Cy.DEFAULT,videoStartTime:this.props.seekTime?this.props.seekTime:this.props.videoStartTime||0}),b(this,"errorRetryCount",2),b(this,"hasSegmentStarted",!1),b(this,"hasPlaybackStarted",!1),b(this,"hasVideoSessionStarted",!1),b(this,"hasVideoSessionEnded",!1),b(this,"lastStallTime",null),b(this,"lastPauseTime",null),b(this,"logSessionStartOnNextPlay",!1),b(this,"playerId",""),b(this,"videoSessionId",""),b(this,"videoVisibleTime",null),b(this,"playbackPerformance",{canPlayTime:null,detailedErrors:"",errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:S(this.props.src,this.props.quicExpGroup),totalStallDurationMs:0,totalPauseDurationMs:0}),b(this,"componentDidMount",()=>{let{contextLogData:e={},playing:t}=this.props,{is_closeup_video:i=!1}=e;(0,y.tE)("videoMounted",!1,i),t&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(f.DR,{initiator:"mount"}));let r=this.videoPlayerRef?.video?.textTracks[0];r&&r.addEventListener("cuechange",()=>{let e=r.activeCues[0];e&&e.line&&(e.line=-6,e.size=88)})}),b(this,"componentDidUpdate",e=>{let{playing:t,visible:i,appInFocus:r,seekTime:a,captionsEnabled:s}=this.props;a&&a!==e.seekTime&&this.setState({videoStartTime:a});let n=this.videoPlayerRef?.video?.textTracks[0];n&&(s?n.mode="showing":n.mode="disabled"),e.appInFocus&&!r&&(this.logPlaybackPerformance(f.$f,{initiator:"update"}),this.logSessionStartOnNextPlay=!0),e.visible&&!1===i&&(this.logSessionStartOnNextPlay=!1,this.updatePauseDuration(),this.logPlaybackPerformance(f.$f,{initiator:"update"})),!1===e.visible&&!0===i&&(this.videoVisibleTime=this.videoVisibleTime||new Date,t?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(f.DR,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),t&&r&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(f.DR,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)}),b(this,"addSegment",()=>{let{canPlayTime:e,loadStartTime:t,segments:i,srcString:r}=this.playbackPerformance,a=-1;e&&t&&0===i.length&&(a=e>t?e-t:0);let s=this.videoPlayerRef&&this.videoPlayerRef.video,n={indicatedKbps:-1,duration:s&&s.duration*f.gJ||-1,lastStartPlayTime:null,level:-1,numServerAddressChange:-1,observedKbps:-1,playbackStartDate:null,serverAddress:"",sourceWidth:-1,sourceHeight:-1,startupTimeMs:a,switchBitrateKbps:-1,uri:r,viewportWidth:s&&s.clientWidth||-1,viewportHeight:s&&s.clientHeight||-1,watchedDurationMs:0};i.push(n)}),b(this,"getCurrentVideoTime",()=>this.videoPlayerRef&&this.videoPlayerRef.video?this.videoPlayerRef.video.currentTime*f.gJ:0),b(this,"getVideoResourceTiming",()=>{if(window?.performance?.getEntriesByName&&this.playbackPerformance.srcString){let e=window.performance.getEntriesByName(this.playbackPerformance.srcString);return e.length>0&&e[0]||null}return null}),b(this,"handleCanPlayVideo",e=>{let{contextLogData:t={},onReady:i,playing:r}=this.props,{is_closeup_video:a=!1}=t,{canPlayVideo:s}=this.state;(0,y.tE)("handleCanPlayVideo",!1,a,{firstCanPlayEvent:!s,playing:r}),this.playbackPerformance.hasFatalError=!1,s||(this.playbackPerformance.canPlayTime=new Date),this.setState({canPlayVideo:!0}),i&&i(e)}),b(this,"handleEnded",e=>{let{loop:t,onEnded:i}=this.props,{segments:r}=this.playbackPerformance,a=r&&r[r.length-1];t&&this.videoPlayerRef&&this.videoPlayerRef.video?(this.updateWatchDurationForCurrentSegment(),a&&(a.lastStartPlayTime=0),this.hasSegmentStarted=!1):t||this.logPlaybackPerformance(f.$f,{initiator:"videoEnded",loop:t}),this.setState({playbackState:f.Cy.ENDED}),i&&i(e)}),b(this,"handleError",()=>{let{contextLogData:e={}}=this.props,{is_closeup_video:t=!1}=e,i=this.videoPlayerRef&&this.videoPlayerRef.video;i?.error?.code!==f.lG.MEDIA_ERR_ABORTED&&(this.playbackPerformance.hasFatalError=!0),this.playbackPerformance.detailedErrors+=`${this.playbackPerformance.detailedErrors.length>0?", ":""}${i?.error?.message||""}`,this.playbackPerformance.errorCode=i?.error?.code||0,this.playbackPerformance.errorName=i?.error?.message?.slice(0,100)||"unknown",this.playbackPerformance.errorReason=i?.error?.message?.slice(0,100)||"unknown";let r={errorName:this.playbackPerformance.errorCode,errorReason:this.playbackPerformance.errorName,errorRetryCount:this.errorRetryCount,playbackState:this.state.playbackState,networkState:i?.networkState||"unknown"};switch((0,y.tE)("fatalError",!1,t,r),i?.error?.code){case f.lG.MEDIA_ERR_ABORTED:break;case f.lG.MEDIA_ERR_NETWORK:case f.lG.MEDIA_ERR_DECODE:case f.lG.MEDIA_ERR_SRC_NOT_SUPPORTED:default:this.errorRetryCount>0&&(i?.load(),this.errorRetryCount-=1)}this.updateWatchDurationForCurrentSegment(),this.setState({playbackState:f.Cy.FAILED})}),b(this,"handleLoadedMetadata",()=>{this.setState({playbackState:f.Cy.LOADED_METADATA})}),b(this,"handleLoadStart",()=>{this.playbackPerformance.loadStartTime=new Date,this.setState({playbackState:f.Cy.LOAD_START})}),b(this,"handleLoadedData",()=>{this.setState({playbackState:f.Cy.LOADED_DATA})}),b(this,"handlePlaying",e=>{this.playbackPerformance.hasFatalError=!1,this.setPlaybackStartTime(),this.hasSegmentStarted||this.addSegment(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.updateStallDuration(),this.updatePauseDuration(),this.setState({playbackState:f.Cy.PLAYING}),this.props.clearSeekTime&&this.props.clearSeekTime(),this.props.onPlaying&&this.props.onPlaying(e)}),b(this,"handleUserPause",({event:e})=>{let{onControlsPause:t}=this.props;this.lastPauseTime=new Date,t&&t({event:e})}),b(this,"handleVideoPause",()=>{this.state.playbackState===f.Cy.STALLING||this.state.playbackState===f.Cy.SEEKING||(this.updateWatchDurationForCurrentSegment(),this.lastPauseTime||this.updateStallDuration()),this.setState({playbackState:f.Cy.PAUSED})}),b(this,"handleSeeking",()=>{this.playbackPerformance.numberOfSeeks+=1;let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&(t.lastStartPlayTime=null),this.state.playbackState!==f.Cy.ENDED&&this.setState({playbackState:f.Cy.SEEKING})}),b(this,"handleStalled",()=>{null===this.lastStallTime&&this.state.playbackState!==f.Cy.ENDED&&(this.lastStallTime=new Date,this.playbackPerformance.numberOfStalls+=1,this.setState({playbackState:f.Cy.STALLING}))}),b(this,"handleTimeUpdate",e=>{let{onTimeChange:t}=this.props;t&&t(e),this.state.playbackState===f.Cy.PLAYING&&(this.updateWatchDurationForCurrentSegment(),this.setLastSegmentStartPlayTime())}),b(this,"resetPlaybackMetrics",()=>{this.hasSegmentStarted=!0,this.hasPlaybackStarted=!1,this.hasVideoSessionStarted=!1,this.hasVideoSessionEnded=!0,this.lastStallTime=null,this.lastPauseTime=null,this.videoSessionId="",this.videoVisibleTime=null,this.logSessionStartOnNextPlay=!1;let e=this.playbackPerformance.segments[this.playbackPerformance.segments.length-1],t={...e,lastStartPlayTime:null,playbackStartDate:null,watchedDurationMs:0};this.playbackPerformance.detailedErrors="",this.playbackPerformance.errorCode=0,this.playbackPerformance.errorName="",this.playbackPerformance.errorReason="",this.playbackPerformance.hasFatalError=!1,this.playbackPerformance.numberOfStalls=0,this.playbackPerformance.numberOfSeeks=0,this.playbackPerformance.playbackStartTimestamp=null,this.playbackPerformance.totalStallDurationMs=0,this.playbackPerformance.segments=[t]}),b(this,"setLastSegmentStartPlayTime",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.lastStartPlayTime&&(t.lastStartPlayTime=this.getCurrentVideoTime())}),b(this,"setLastSegmentPlaybackStartDate",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.playbackStartDate&&(t.playbackStartDate=Date.now())}),b(this,"setPlaybackStartTime",()=>{this.hasPlaybackStarted||(this.playbackPerformance.playbackStartTimestamp=Date.now(),this.hasPlaybackStarted=!0)}),b(this,"setVideoPlayerRef",e=>{let{setVideoRef:t}=this.props;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoPlayerRef.video)){let e=this.videoPlayerRef.video;e.addEventListener("loadedmetadata",this.handleLoadedMetadata),e.addEventListener("loadeddata",this.handleLoadedData),e.addEventListener("pause",this.handleVideoPause),e.readyState>=3&&(this.setState({canPlayVideo:!0}),this.playbackPerformance.canPlayTime=new Date)}}),b(this,"updateStallDuration",()=>{if(null!==this.lastStallTime){let{lastStallTime:e}=this;this.playbackPerformance.totalStallDurationMs+=new Date-e,this.lastStallTime=null}}),b(this,"updatePauseDuration",()=>{if(null!==this.lastPauseTime){let{lastPauseTime:e}=this;this.playbackPerformance.totalPauseDurationMs+=new Date-e,this.lastPauseTime=null}}),b(this,"updateWatchDurationForCurrentSegment",()=>{let{segments:e}=this.playbackPerformance,t=e&&e[e.length-1],i=t?t.lastStartPlayTime:null,r=this.getCurrentVideoTime();if(t&&null!==i&&"number"==typeof r&&"number"==typeof i){let e=r-i;e>0&&(t.watchedDurationMs+=e,t.lastStartPlayTime=null)}}),b(this,"logPlaybackPerformance",(e,t)=>{let{contextLogData:i={},userId:r,isAutoPlay:a,logContextEvent:s,preload:n}=this.props,{is_closeup_video:o=!1}=i,{canPlayTime:l,detailedErrors:d,errorCode:u,errorName:c,errorReason:h,hasFatalError:p,loadStartTime:m,totalPauseDurationMs:g,totalStallDurationMs:v,numberOfStalls:b,numberOfSeeks:S,playbackStartTimestamp:_,segments:P,srcString:E}=this.playbackPerformance,R=this.videoPlayerRef&&this.videoPlayerRef.video,T=e===f.DR,w=T&&!this.hasVideoSessionStarted,k=!T&&!this.hasVideoSessionEnded&&this.hasVideoSessionStarted;if(R&&(w||k)){let w=-1;l&&m&&(w=l>m?l-m:0);let k=-1;l&&this.videoVisibleTime&&(k=l>this.videoVisibleTime?l-this.videoVisibleTime:0),T&&(this.videoSessionId=(0,f.Y7)(r),this.playerId=this.playerId||(0,f.EB)());let D=this.getVideoResourceTiming(),A={averageVideoKbps:-1,autoplaying:a,detailedErrors:d,downloadedKiloBytes:"number"==typeof D?.decodedBodySize&&D.decodedBodySize/f.Fm||0,errorCode:u,errorName:c,errorReason:h,fatalError:p,isCellular:!1,nativeVideoDurationMs:R.duration*f.gJ||-1,numberOfStalls:b,numberOfSeeks:S,overallPausedDurationMs:g,overallBufferDurationMs:v,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:this.videoSessionId,playbackStartTimestamp:_||-1,segments:[],sessionMark:e,screenPixelScale:window?.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:R.clientWidth,startupPlayerHeight:R.clientHeight,startupTimeMs:w,startupLatencyMs:k,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:R.videoWidth,startupVariantHeight:R.videoHeight,videoUrl:E,wasVideoPreloaded:"auto"===n};if(!T){this.updateWatchDurationForCurrentSegment(),this.updateStallDuration();let e=P.reduce((e,t)=>e+(t.watchedDurationMs||0),0);A.overallWatchedDurationMs=e,A.startupVariantWatchedDurationMs=e,A.segments=this.playbackPerformance.segments,0===e?(A.errorName="invalid_watch_duration",A.rebufferRate=-1):A.rebufferRate=v/e}(0,y.ZP)(A,!1,o,{playbackState:this.state.playbackState,...t});let{view:x,viewParameter:C,component:I,element:O,objectId:L,...N}=i;s({event_type:3606,event_data:{videoPerformanceData:A},view_type:x,view_parameter:C,component:I,element:O,object_id_str:L,aux_data:{...N,is_closeup_video:o,playback_session_id:this.videoSessionId}}),T?(this.hasVideoSessionStarted=!0,this.hasVideoSessionEnded=!1):this.resetPlaybackMetrics(),(0,y.tE)(T?"sessionStart":"sessionEnd",!1,o,{playbackState:this.state.playbackState,...t})}})}componentWillUnmount(){let{loop:e}=this.props;this.updatePauseDuration(),this.logPlaybackPerformance(f.$f,{initiator:"unmount",loop:e})}render(){let{aspectRatio:e,captions:t,controls:i,loop:s,loopOverride:n,objectFit:o,onDurationChange:l,onFullscreenChange:d,onLoadedChange:u,onControlsPlay:c,onPlayheadDown:p,onPlayheadUp:m,onSeek:y,onVolumeChange:f,playbackRate:b,playing:_,playsInline:P,poster:E,preload:R,src:T,volume:w}=this.props,{canPlayVideo:k,videoStartTime:D}=this.state;return(0,v.jsxs)(r.Fragment,{children:[(0,v.jsx)(h.Z,{unsafeCSS:g.P}),(0,v.jsx)(a.nk,{ref:this.setVideoPlayerRef,aspectRatio:e,autoplay:k&&_,captions:t,controls:i,loop:void 0===n?s:n,objectFit:o,onControlsPause:this.handleUserPause,onControlsPlay:c,onDurationChange:l,onEnded:this.handleEnded,onError:this.handleError,onFullscreenChange:d,onLoadedChange:u,onLoadStart:this.handleLoadStart,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:p,onPlayheadUp:m,onPlaying:this.handlePlaying,onReady:this.handleCanPlayVideo,onSeek:y,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:f,onWaiting:this.handleStalled,playbackRate:b,playing:k&&_,playsInline:P,poster:E,preload:R,src:S(T,this.props.quicExpGroup),startTime:D||void 0,volume:w})]})}}let P=(0,r.memo)(function(e){let{logContextEvent:t}=(0,c.v)(),{country:i,isAuthenticated:r,isBot:a,isSocialBot:s,unauthId:l,userAgent:d}=(0,n.B)(),{browserName:h,browserVersion:f,isMobile:g}=d,{contextLogData:b={}}=e,{is_closeup_video:S=!1,view:P,viewParameter:E}=b,{appUI:{appInFocus:R}}=(0,u.I)(),{checkExperiment:T}=(0,p.F)(),{clearSeekTime:w}=(0,o.RC)(),k=null;r&&(k=T("web_video_quic").group.length?T("web_video_quic").group:null);let D=(0,m.Z)();return(0,y.r$)({browserName:h,browserVersion:f,country:i,isAuthenticated:r,isBot:a,is_closeup_video:S,isMobile:g,isSocialBot:s,view:P,viewParameter:E}),(0,v.jsx)(_,{...e,appInFocus:R,clearSeekTime:w,logContextEvent:t,quicExpGroup:k,userId:D.id||l})});function E(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let R=e=>{if(Array.isArray(e)){let t=e.find(e=>"video/m3u8"===e.type);return t?t.src:void 0}return/m3u8$/.test(e)?e:void 0};class T extends r.PureComponent{constructor(e){super(e),E(this,"componentDidUpdate",e=>{e.videoStartTime&&this.props.videoStartTime&&e.videoStartTime<this.props.videoStartTime&&this.videoPlayerRef?.video&&(this.videoPlayerRef.video.currentTime=this.props.videoStartTime)}),E(this,"setVideoPlayerRef",e=>{e&&(this.videoPlayerRef=e)}),E(this,"handleOnEnded",({event:e})=>{let{loop:t,onLoop:i,onEnded:r}=this.props;r&&(r({event:e}),this.videoPlayerRef&&this.videoPlayerRef.video&&t&&(this.videoPlayerRef.video.play(),i&&i()))}),E(this,"handlePlaying",e=>{this.props.onPlaying&&this.props.onPlaying(e)});let t=R(e.src);this.state={useHlsVideo:!e.preferMp4&&!(0,s.G6)(e.requestContext.userAgent.browserName)&&!!t}}render(){let{aspectRatio:e,appInFocus:t,backgroundColor:i,captions:r,toggleCaptions:a,clearSeekTime:s,contextLogData:n,controls:o,hlsConfig:d,isAutoPlay:u,loop:c,objectFit:h,onDurationChange:p,onEnded:m,onFullscreenChange:y,onLoadedChange:f,onControlsPause:g,onControlsPlay:b,onPlayheadDown:S,onPlayheadUp:_,onReady:E,onSeek:T,onTimeChange:w,onVolumeChange:k,playbackRate:D,playing:A,playsInline:x,poster:C,preferMp4:I,preload:O,seekTime:L,src:N,videoStartTime:j,visible:F,volume:M}=this.props,{useHlsVideo:V}=this.state,H=R(N),U={...d,startPosition:j||-1},Z=!m&&c;return V&&H?(0,v.jsx)(l.Z,{appInFocus:t,aspectRatio:e,backgroundColor:i,captions:r,captionsEnabled:a,clearSeekTime:s,contextLogData:n,controls:o,hlsConfig:U,isAutoPlay:u,loop:c,loopOverride:Z,objectFit:h,onControlsPause:g,onControlsPlay:b,onDurationChange:p,onEnded:this.handleOnEnded,onFullscreenChange:y,onLoadedChange:f,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:S,onPlayheadUp:_,onPlaying:this.handlePlaying,onReady:E,onSeek:T,onTimeChange:w,onVolumeChange:k,playbackRate:D,playing:A,playsInline:x,poster:C,preload:O,seekTime:L,setVideoRef:this.setVideoPlayerRef,src:H,visible:F,volume:M}):(0,v.jsx)(P,{aspectRatio:e,captions:r,captionsEnabled:a,clearSeekTime:s,contextLogData:n,controls:o,isAutoPlay:u,loop:c,loopOverride:Z,objectFit:h,onControlsPause:g,onControlsPlay:b,onDurationChange:p,onEnded:this.handleOnEnded,onFullscreenChange:y,onLoadedChange:f,onPlay:()=>{},onPlayError:()=>{},onPlayheadDown:S,onPlayheadUp:_,onPlaying:this.handlePlaying,onReady:E,onSeek:T,onTimeChange:w,onVolumeChange:k,playbackRate:D,playing:A,playsInline:x,poster:C,preload:O,seekTime:L,setVideoRef:this.setVideoPlayerRef,src:I?N:H||N,videoStartTime:j,visible:F,volume:M})}}function w(e){let{appUI:{appInFocus:t}}=(0,u.I)(),{seekTime:i}=(0,o.Hx)(),{captionsEnabled:r}=(0,d.r)(),{clearSeekTime:a}=(0,o.RC)(),s=(0,n.B)();return(0,v.jsx)(T,{...e,appInFocus:t,clearSeekTime:a,requestContext:s,seekTime:i,toggleCaptions:r})}},944546:(e,t,i)=>{i.d(t,{Ul:()=>s,VS:()=>r,hy:()=>n,iM:()=>a,j4:()=>o});let r=2,a=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1],s={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",bottom:0},n=128,o=e=>e&&document.querySelector(`video[poster="${e}"]`)||null}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/AuthDesktopPinRep.en_GB-c7bdaf15b39dd5a7.mjs.map